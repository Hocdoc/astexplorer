(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+aVN":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.find=e.pattern=void 0;e.pattern=function(t){return new RegExp(t,"yd")};e.find=function(t,e,s,n){let i;e.lastIndex=s,i=void 0!==n?t.substring(0,n+1):t;const r=e.exec(i);if(null!==r){const t=[];if(r.indices.length>1)for(let e=1;e<r.indices.length;e++){const[s,n]=r.indices[e];t.push(i.substring(s,n))}return{startpos:r.indices[0][0],endpos:r.indices[0][1]-1,captures:t}}return null}},"0NlZ":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isInline=e.isBlock=e.version=e.renderDjot=e.toPandoc=e.fromPandoc=e.applyFilter=e.HTMLRenderer=e.renderHTML=e.parseEvents=e.renderAST=e.parse=void 0;var n=s("wqKs");Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return n.parse}}),Object.defineProperty(e,"renderAST",{enumerable:!0,get:function(){return n.renderAST}});var i=s("shDi");Object.defineProperty(e,"parseEvents",{enumerable:!0,get:function(){return i.parseEvents}});var r=s("d+JW");Object.defineProperty(e,"renderHTML",{enumerable:!0,get:function(){return r.renderHTML}}),Object.defineProperty(e,"HTMLRenderer",{enumerable:!0,get:function(){return r.HTMLRenderer}});var a=s("LPjp");Object.defineProperty(e,"applyFilter",{enumerable:!0,get:function(){return a.applyFilter}});var o=s("E8Jq");Object.defineProperty(e,"fromPandoc",{enumerable:!0,get:function(){return o.fromPandoc}}),Object.defineProperty(e,"toPandoc",{enumerable:!0,get:function(){return o.toPandoc}});var c=s("dML+");Object.defineProperty(e,"renderDjot",{enumerable:!0,get:function(){return c.renderDjot}});var l=s("iAPQ");Object.defineProperty(e,"version",{enumerable:!0,get:function(){return l.version}});var h=s("P+sv");Object.defineProperty(e,"isBlock",{enumerable:!0,get:function(){return h.isBlock}}),Object.defineProperty(e,"isInline",{enumerable:!0,get:function(){return h.isInline}})},E8Jq:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fromPandoc=e.toPandoc=void 0;const n=s("KaJk"),i={Decimal:{Period:"1.",OneParen:"1)",TwoParens:"(1)"},LowerAlpha:{Period:"a.",OneParen:"a)",TwoParens:"(a)"},UpperAlpha:{Period:"A.",OneParen:"A)",TwoParens:"(A)"},LowerRoman:{Period:"i.",OneParen:"i)",TwoParens:"(i)"},UpperRoman:{Period:"I.",OneParen:"I)",TwoParens:"(I)"}},r={};for(const t in i)for(const e in i[t])r[i[t][e]]=[t,e];const paraToPlain=function(t){return"Para"===t.t&&(t.t="Plain"),t},toPandocAttr=function(t){const e=Object.assign(Object.assign({},t.autoAttributes),t.attributes);if(e){const t=e.id||"",s=e.class&&e.class.split(" ")||[],n=[];for(const s in e)s!==t&&"class"!==s&&n.push([s,e[s]]);return[t,s,n]}return["",[],[]]};class PandocRenderer{constructor(t={}){this.references={},this.footnotes={},this.options=t,this.smartPunctuationMap=this.options.smartPunctuationMap||{right_single_quote:"’",left_single_quote:"‘",right_double_quote:"”",left_double_quote:"“",ellipses:"…",em_dash:"—",en_dash:"–"},this.warn||(this.warn=()=>{})}toPandocChildren(t){if("children"in t){const e=[];return t.children.forEach(t=>{this.addToPandocElts(e,t)}),e}return[]}toPandocDefinitionListItem(t){const e=this;return function(t){if(!("children"in t))return[];const[s,n]=t.children;return[e.toPandocChildren(s),[e.toPandocChildren(n)]]}}toPandocListItem(t){const e=this;return function(s){let n=e.toPandocChildren(s);return"checkbox"in s&&s.checkbox&&"Para"===n[0].t&&("checked"===s.checkbox?n[0].c.unshift({t:"Str",c:"☒"},{t:"Space"}):n[0].c.unshift({t:"Str",c:"☐"},{t:"Space"})),"tight"in t&&t.tight&&(n=n.map(paraToPlain)),n}}addToPandocElts(t,e){switch(e.tag){case"section":case"div":{const s=toPandocAttr(e);"section"===e.tag&&s[1].unshift("section"),t.push({t:"Div",c:[s,this.toPandocChildren(e)]});break}case"block_quote":t.push({t:"BlockQuote",c:this.toPandocChildren(e)});break;case"definition_list":{const s=e.children.map(this.toPandocDefinitionListItem(e));t.push({t:"DefinitionList",c:s});break}case"task_list":case"bullet_list":{let s;s=e.children.map(this.toPandocListItem(e)),t.push({t:"BulletList",c:s});break}case"ordered_list":{const s=e.children.map(this.toPandocListItem(e)),[n,i]=r[e.style],a=e.start||1;t.push({t:"OrderedList",c:[[a,{t:n},{t:i}],s]});break}case"task_list_item":case"list_item":break;case"para":t.push({t:"Para",c:this.toPandocChildren(e)});break;case"heading":t.push({t:"Header",c:[e.level,toPandocAttr(e),this.toPandocChildren(e)]});break;case"code_block":{const s=toPandocAttr(e);e.lang&&s[1].unshift(e.lang),t.push({t:"CodeBlock",c:[s,e.text]});break}case"raw_block":t.push({t:"RawBlock",c:[e.format,e.text]});break;case"thematic_break":t.push({t:"HorizontalRule"});break;case"table":{const s=toPandocAttr(e),n=["",[],[]];let i=[],r=[],a=[];const o=[],c=[n,[]];let l=[],h=[];const d={left:"AlignLeft",right:"AlignRight",center:"AlignCenter",default:"AlignDefault"},toColSpec=function(t){return[{t:d[t.align]||"AlignDefault"},{t:"ColWidthDefault"}]},u=this,toPandocCell=function(t){if("children"in t)return[toPandocAttr(t),{t:"align"in t&&d[t.align]||"AlignDefault"},1,1,[{t:"Plain",c:u.toPandocChildren(t)}]]},toPandocRow=function(t){if("children"in t)return[toPandocAttr(t),t.children.map(toPandocCell)]};for(let t=0;t<e.children.length;t++){const s=e.children[t];if(!("children"in s))break;0===r.length&&(r=s.children.map(toColSpec)),"caption"===s.tag?s.children.length&&(i=this.toPandocChildren(s)):s.head?0===h.length?l.push(toPandocRow(s)):(o.push([n,0,l,h]),h=[],l=[toPandocRow(s)]):(0===o.length&&0===h.length&&(a=l,l=[]),h.push(toPandocRow(s)))}(l.length>0||h.length>0)&&o.push([n,0,l,h]),t.push({t:"Table",c:[s,[null,[{t:"Plain",c:i}]],r,[n,a],o,c]});break}case"raw_inline":t.push({t:"RawInline",c:[e.format,e.text]});break;case"soft_break":t.push({t:"SoftBreak"});break;case"hard_break":t.push({t:"LineBreak"});break;case"str":e.text.split(/ +/).forEach((e,s)=>{s>0&&t.push({t:"Space"}),e.length>0&&t.push({t:"Str",c:e})});break;case"verbatim":t.push({t:"Code",c:[toPandocAttr(e),e.text]});break;case"inline_math":t.push({t:"Math",c:[{t:"InlineMath"},e.text]});break;case"display_math":t.push({t:"Math",c:[{t:"DisplayMath"},e.text]});break;case"non_breaking_space":t.push({t:"Str",c:" "});break;case"smart_punctuation":t.push({t:"Str",c:this.smartPunctuationMap[e.type]||e.text});break;case"symb":t.push({t:"Span",c:[["",["symbol"],[["alias",e.alias]]],[{t:"Str",c:":"+e.alias+":"}]]});break;case"single_quoted":case"double_quoted":{const s={t:"single_quoted"===e.tag?"SingleQuote":"DoubleQuote"};t.push({t:"Quoted",c:[s,this.toPandocChildren(e)]});break}case"email":case"url":{let s=e.text;"email"===e.tag&&(s="mailto:"+s);const n=toPandocAttr(e);n[1].unshift("email"===e.tag?"email":"uri"),t.push({t:"Link",c:[n,[{t:"Str",c:e.text}],[s,""]]});break}case"image":case"link":{let s=e.destination||"";const i={};if(e.reference){const t=this.references[e.reference];if(t){s=t.destination||"";const e=Object.assign(Object.assign({},t.autoAttributes),t.attributes);if(e)for(const t in e)i[t]=e[t]}else this.warn(new n.Warning("Reference "+e.reference+" not found."))}const r=Object.assign(Object.assign({},e.autoAttributes),e.attributes);if(r)for(const t in r)i[t]&&"class"===t?i[t]+=" "+r[t]:i[t]||(i[t]=r[t]);const a=toPandocAttr({tag:"link",attributes:i,children:[]}),o=s||"",c=e.attributes&&e.attributes.title||e.autoAttributes&&e.autoAttributes.title||"";c&&(a[2]=a[2].filter(([t,e])=>"title"!==t)),t.push({t:"link"===e.tag?"Link":"Image",c:[a,this.toPandocChildren(e),[o,c]]});break}case"emph":t.push({t:"Emph",c:this.toPandocChildren(e)});break;case"strong":t.push({t:"Strong",c:this.toPandocChildren(e)});break;case"superscript":t.push({t:"Superscript",c:this.toPandocChildren(e)});break;case"subscript":t.push({t:"Subscript",c:this.toPandocChildren(e)});break;case"span":t.push({t:"Span",c:[toPandocAttr(e),this.toPandocChildren(e)]});break;case"mark":t.push({t:"Span",c:[["",["mark"],[]],this.toPandocChildren(e)]});break;case"insert":t.push({t:"Underline",c:this.toPandocChildren(e)});break;case"delete":t.push({t:"Strikeout",c:this.toPandocChildren(e)});break;case"footnote_reference":{const s=this.footnotes[e.text];s?t.push({t:"Note",c:this.toPandocChildren(s)}):t.push({t:"Superscript",c:[{t:"Str",c:e.text}]});break}default:this.warn(new n.Warning("Skipping unhandled node "+e.tag))}}toPandoc(t){return this.references=t.references,this.footnotes=t.footnotes,{"pandoc-api-version":[1,23],meta:{},blocks:this.toPandocChildren(t)}}}const fromPandocAttr=function(t){const e={};t[0]&&(e.id=t[0]),t[1].length>0&&(e.class=t[1].join(" "));for(let s=0;s<t[2].length;s++)e[t[2][s][0].toString()]=t[2][s][1];return 0===Object.keys(e).length?null:e},isPlainOrPara=function(t){return"Plain"===t.t||"Para"===t.t},hasCheckbox=function(t){if(!t[0])return null;const e=t[0];return isPlainOrPara(e)&&e.c.length>=2&&"Str"===e.c[0].t&&"Space"===e.c[1].t?"☒"===e.c[0].c?(e.c.shift(),e.c.shift(),"checked"):"☐"===e.c[0].c?(e.c.shift(),e.c.shift(),"unchecked"):null:null};class PandocParser{constructor(t={}){this.footnotes={},this.footnoteIndex=0,this.options=t,this.warn=t.warn||(()=>{})}fromPandocInlines(t){let e=[];const s=[];for(let n=0;n<t.length;n++){const i=t[n];if("Str"===i.t)e.push(i.c);else if("Space"===i.t)e.push(" ");else switch(e.length>0&&(s.push({tag:"str",text:e.join("")}),e=[]),i.t){case"SoftBreak":s.push({tag:"soft_break"});break;case"LineBreak":s.push({tag:"hard_break"});break;case"Emph":s.push({tag:"emph",children:this.fromPandocInlines(i.c)});break;case"Strong":s.push({tag:"strong",children:this.fromPandocInlines(i.c)});break;case"Superscript":s.push({tag:"superscript",children:this.fromPandocInlines(i.c)});break;case"Subscript":s.push({tag:"subscript",children:this.fromPandocInlines(i.c)});break;case"Strikeout":s.push({tag:"delete",children:this.fromPandocInlines(i.c)});break;case"Span":{const t={tag:"span",children:this.fromPandocInlines(i.c[1])},e=fromPandocAttr(i.c[0]);e&&(t.attributes=e),s.push(t);break}case"Underline":s.push({tag:"span",attributes:{class:"underline"},children:this.fromPandocInlines(i.c)});break;case"SmallCaps":s.push({tag:"span",attributes:{class:"smallcaps"},children:this.fromPandocInlines(i.c)});break;case"Math":s.push({tag:"DisplayMath"===i.c[0].t?"display_math":"inline_math",text:i.c[1]});break;case"Quoted":"SingleQuote"===i.c[0].t?s.push({tag:"single_quoted",children:this.fromPandocInlines(i.c[1])}):s.push({tag:"double_quoted",children:this.fromPandocInlines(i.c[1])});break;case"RawInline":s.push({tag:"raw_inline",format:i.c[0],text:i.c[1]});break;case"Code":{const t=fromPandocAttr(i.c[0]),e={tag:"verbatim",text:i.c[1]};t&&(e.attributes=t),s.push(e);break}case"Image":case"Link":{let t=fromPandocAttr(i.c[0]);i.c[2][1]&&(t=t||{},t.title=i.c[2][1]);const e=i.c[2][0],n=this.fromPandocInlines(i.c[1]);if("Image"===i.t){const i={tag:"image",destination:e,children:n};t&&(i.attributes=t),s.push(i)}else{const i={tag:"link",destination:e,children:n};t&&(i.attributes=t),s.push(i)}break}case"Cite":s.push({tag:"span",attributes:{class:"cite"},children:this.fromPandocInlines(i.c[1])});break;case"Note":{this.footnoteIndex++;const t=this.footnoteIndex.toString(),e=i.c.map(t=>this.fromPandocBlock(t));this.footnotes[this.footnoteIndex.toString()]={tag:"footnote",label:t,children:e},s.push({tag:"footnote_reference",text:t});break}}}return e.length>0&&s.push({tag:"str",text:e.join("")}),s}fromPandocBlock(t){switch(t.t){case"Plain":case"Para":return{tag:"para",children:this.fromPandocInlines(t.c)};case"BlockQuote":return{tag:"block_quote",children:t.c.map(t=>this.fromPandocBlock(t))};case"Div":{let e=fromPandocAttr(t.c[0]);const s=/\bsection\b/.test(e&&e.class||"")?"section":"div",n=t.c[1].map(t=>this.fromPandocBlock(t));if("section"===s)return e=e||{},e.class=e.class.replace(/section */,""),e.class||delete e.class,{tag:"section",attributes:e,children:n};{const t={tag:"div",children:n};return e&&(t.attributes=e),t}}case"Header":{const e=fromPandocAttr(t.c[1]),s={tag:"heading",level:t.c[0],children:this.fromPandocInlines(t.c[2])};return e&&(s.attributes=e),s}case"HorizontalRule":return{tag:"thematic_break"};case"RawBlock":return{tag:"raw_block",format:t.c[0],text:t.c[1]};case"CodeBlock":{const e=fromPandocAttr(t.c[0]);let s;if(e&&e.class){const t=e.class.split(/  */);s=t[0],t.shift(),t.length>0?e.class=t.join(" "):delete e.class}const n={tag:"code_block",lang:s,text:t.c[1]};return e&&(n.attributes=e),s||delete n.lang,n}case"DefinitionList":{const e=[];for(let s=0;s<t.c.length;s++){const n=t.c[s][0],i=t.c[s][1],r=this.fromPandocInlines(n),a=[];for(let t=0;t<i.length;t++)i[t].map(t=>{a.push(this.fromPandocBlock(t))});e.push({tag:"definition_list_item",children:[{tag:"term",children:r},{tag:"definition",children:a}]})}return{tag:"definition_list",children:e}}case"OrderedList":case"BulletList":{const e=[],s=[];let n,r=!1;n="BulletList"===t.t?t.c:t.c[1];for(let t=0;t<n.length;t++){const i=hasCheckbox(n[t]),a=n[t].map(t=>("Plain"===t.t?r=!0:"Para"===t.t&&(r=!1),this.fromPandocBlock(t)));null!==i?s.push({tag:"task_list_item",checkbox:i,children:a}):e.push({tag:"list_item",children:a})}if("BulletList"===t.t)return s.length>0?{tag:"task_list",tight:r,children:s}:{tag:"bullet_list",style:"-",tight:r,children:e};if("OrderedList"===t.t){const s=t.c[0][0];let n=t.c[0][1].t;"DefaultStyle"===n&&(n="Decimal");let a=t.c[0][2].t;return"DefaultDelim"===a&&(a="Period"),{tag:"ordered_list",style:i[n][a],start:s,tight:r,children:e}}}case"Table":{const e=fromPandocAttr(t.c[0]),s=t.c[1][1],i={tag:"caption",children:[]};s.length>1||1===s.length&&!isPlainOrPara(s[0])?this.warn(new n.Warning("Skipping block-level content in table caption.")):s[0]&&"c"in s[0]&&(i.children=this.fromPandocInlines(s[0].c));const r=t.c[2],a=[];for(const t in r)a.push(r[t][0].t.slice(5).toLowerCase());const o=[],c=t.c[3][1];for(const t in c)o.push(this.fromPandocRow(c[t],!0,0,a));const l=t.c[4];for(const t in l){const e=l[t][1],s=l[t][2];for(const t in s)o.push(this.fromPandocRow(s[t],!0,e,a));const n=l[t][3];for(const t in n)o.push(this.fromPandocRow(n[t],!1,e,a))}const h=t.c[5][1];for(const t in h)o.push(this.fromPandocRow(h[t],!1,0,a));const d={tag:"table",children:[i,...o]};return e&&(d.attributes=e),d}case"Figure":{const e=fromPandocAttr(t.c[0]),s=(/\bsection\b/.test(e&&e.class||""),t.c[2].map(t=>this.fromPandocBlock(t))),n=t.c[1][1];if(n.length>0){const t=n.map(t=>this.fromPandocBlock(t));s.push(...t)}const i={tag:"div",children:s};return e&&(i.attributes=e),i}case"LineBlock":{const e=[];for(let s=0;s<t.c.length;s++)s>0&&e.push({tag:"hard_break"}),e.push(...this.fromPandocInlines(t.c[s]));return{tag:"para",children:e}}case"Null":return{tag:"raw_block",format:"none",text:""}}return{tag:"raw_block",format:"error",text:"Could not convert "+t.t}}fromPandocRow(t,e,s,n){const i=fromPandocAttr(t[0]),r=t[1],a=[];for(let t=0;t<r.length;t++)a.push(this.fromPandocCell(r[t],e||t<s,n[t]));const o={tag:"row",head:e,children:a};return i&&(o.attributes=i),o}fromPandocCell(t,e,s){let i=[];const r=fromPandocAttr(t[0]);let a=t[1].t.slice(5).toLowerCase();"default"===a&&(a=s);const o=t[4];o.length>1||1===o.length&&!isPlainOrPara(o[0])?(this.warn(new n.Warning("Skipping table cell with block-level content.")),i=[{tag:"str",text:"((content omitted))"}]):o[0]&&(i=this.fromPandocInlines(o[0].c));const c={tag:"cell",head:e,align:a,children:i};return r&&(c.attributes=r),c}fromPandoc(t){if("object"!=typeof t)throw Error("Pandoc document must be an object");if(!t["pandoc-api-version"])throw Error("Pandoc document lacks pandoc-api-version");if(!t.blocks)throw Error("Pandoc document lacks blocks");if(!t.meta)throw Error("Pandoc document lacks meta");return{tag:"doc",children:t.blocks.map(t=>this.fromPandocBlock(t)),footnotes:this.footnotes,references:{},autoReferences:{}}}}e.toPandoc=function(t,e){return new PandocRenderer(e).toPandoc(t)};e.fromPandoc=function(t,e){return new PandocParser(e).fromPandoc(t)}},KaJk:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Warning=void 0;e.Warning=class Warning{constructor(t,e){this.message=t,"number"==typeof e?this.offset=e:e&&"line"in e&&(this.sourceLoc=e,this.offset=e.offset)}render(){let t=this.message;return this.sourceLoc?t+=` at line ${this.sourceLoc.line}, col ${this.sourceLoc.col}`:this.offset&&(t+=" at offset "+this.offset),t}}},LPjp:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyFilter=void 0;class Walker{constructor(t){this.finished=!1,this.stack=[],this.enter=!0,this.top=t,this.current=t}walk(t){for(;!this.finished;){t(this);const e=this.stack&&this.stack[this.stack.length-1];if(this.enter)"children"in this.current&&this.current.children.length>0?(this.stack.push({node:this.current,childIndex:0}),this.current=this.current.children[0],this.enter=!0):this.enter=!1;else if(e){e.childIndex++;const t=e.node.children[e.childIndex];t?(this.current=t,this.enter=!0):(this.stack.pop(),this.current=e.node,this.enter=!1)}else this.finished=!0}}}const traverse=function(t,e){return new Walker(t).walk(t=>{let s=function(t,e,s){if(!t||!t.tag)throw new Error("Filter called on a non-node.");const n=s[t.tag];if(!n)return!1;let i;return e?"enter"in n&&n.enter&&(i=n.enter):i="exit"in n&&n.exit?n.exit:n,"function"==typeof i?i(t):void 0}(t.current,t.enter,e);const n=t.stack[t.stack.length-1];if("object"==typeof s&&"stop"in s&&s.stop&&(s=s.stop,t.enter=!1),s)if(Array.isArray(s)){if(!n)throw Error("Cannot replace top node with multiple nodes");n.node.children.splice(n.childIndex,1,...s),t.current=n.node.children[n.childIndex],s.length>1&&(n.childIndex+=s.length-1)}else if("object"==typeof s&&"tag"in s&&s.tag){if(!n)return s;n.node.children[n.childIndex]=s}}),t};e.applyFilter=function(t,e){const s=e();let n;n=Array.isArray(s)?s:[s];for(const e of n){traverse(t,e);for(const s in t.footnotes)traverse(t.footnotes[s],e);for(const s in t.references)traverse(t.references[s],e)}}},"P+sv":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCaption=e.isRow=e.isBlock=e.isInline=void 0;const n={para:!0,heading:!0,block_quote:!0,thematic_break:!0,section:!0,div:!0,code_block:!0,raw_block:!0,bullet_list:!0,ordered_list:!0,task_list:!0,definition_list:!0,table:!0,reference:!0,footnote:!0};e.isBlock=function isBlock(t){return n[t.tag]||!1};const i={str:!0,soft_break:!0,hard_break:!0,non_breaking_space:!0,symb:!0,verbatim:!0,raw_inline:!0,inline_math:!0,display_math:!0,url:!0,email:!0,footnote_reference:!0,smart_punctuation:!0,emph:!0,strong:!0,link:!0,image:!0,span:!0,mark:!0,superscript:!0,subscript:!0,insert:!0,delete:!0,double_quoted:!0,single_quoted:!0};e.isInline=function isInline(t){return i[t.tag]||!1},e.isRow=function isRow(t){return"head"in t},e.isCaption=function isCaption(t){return!("head"in t)}},"d+JW":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLRenderer=e.renderHTML=void 0;const n=s("wqKs"),i=s("KaJk"),r=/[&<>]/,a=/[&<>"]/;class HTMLRenderer{constructor(t){this.smartPunctuationMap={right_single_quote:"’",left_single_quote:"‘",right_double_quote:"”",left_double_quote:"“",ellipses:"…",em_dash:"—",en_dash:"–"},this.warn=t.warn||(()=>{}),this.options=t||{},this.tight=!1,this.footnoteIndex={},this.nextFootnoteIndex=1,this.references={},this.autoReferences={}}escape(t){return r.test(t)?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}escapeAttribute(t){return a.test(t)?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):t}renderAttributes(t,e){let s="";if(e)for(const n in e)if("class"===n){let i=e[n];t.attributes&&t.attributes.class&&(i=`${i} ${t.attributes.class}`),s+=` ${n}="${this.escapeAttribute(i)}"`}else s+=` ${n}="${this.escapeAttribute(e[n])}"`;const n=Object.assign(Object.assign({},t.autoAttributes),t.attributes);if(n)for(const t in n){const i=n[t];"class"===t&&e&&e.class||(s+=` ${t}="${this.escapeAttribute(i)}"`)}if(t.pos){const e=t.pos.start,n=t.pos.end;s+=` data-startpos="${e.line}:${e.col}:${e.offset}" data-endpos="${n.line}:${n.col}:${n.offset}"`}return s}renderTag(t,e,s){let n="";return(e.attributes||e.autoAttributes||s||e.pos)&&(n=this.renderAttributes(e,s)),`<${t}${n}>`}renderCloseTag(t){return`</${t}>`}inTags(t,e,s,n){const i=s>=2?"\n":"",r=s>=1?"\n":"";return`${this.renderTag(t,e,n)}${i}${this.renderChildren(e)}</${t}>${r}`}addBacklink(t,e){const s=`<a href="#fnref${e}" role="doc-backlink">↩︎</a>`;return/\<\/p\>[\r\n]*$/.test(t)?t.replace(/\<\/p\>([\r\n]*)$/,s+"</p>$1"):t+`<p>${s}</p>\n`}renderChildren(t){let e="";const s=this.tight;"tight"in t&&(this.tight=!!t.tight);for(const s of t.children)e+=this.renderAstNode(s);return"tight"in t&&(this.tight=s),e}renderAstNode(t){var e;const s=null===(e=this.options.overrides)||void 0===e?void 0:e[t.tag];return s?s(t,this):this.renderAstNodeDefault(t)}renderNotes(t){let e="";const s=[],n={};for(const e in t)n[e]=this.renderChildren(t[e]);for(const t in this.footnoteIndex){const e=this.footnoteIndex[t];e&&(s[e]=n[t])}e+='<section role="doc-endnotes">\n<hr>\n<ol>\n';for(let t=1;t<s.length;t++){const n=s[t]||"";e+=`<li id="fn${t}">\n`,e+=this.addBacklink(n,t),e+="</li>\n"}return e+="</ol>\n</section>\n",e}renderAstNodeDefault(t){var e;switch(t.tag){case"doc":{let e="";return e+=this.renderChildren(t),this.nextFootnoteIndex>1&&(e+=this.renderNotes(t.footnotes)),e}case"para":return this.tight?this.renderChildren(t)+"\n":this.inTags("p",t,1);case"block_quote":return this.inTags("blockquote",t,2);case"div":return this.inTags("div",t,2);case"section":return this.inTags("section",t,2);case"list_item":return this.inTags("li",t,2);case"task_list_item":return this.inTags("li",t,2,{class:"checked"===t.checkbox?"checked":"unchecked"});case"definition_list_item":return this.renderChildren(t);case"definition":return this.inTags("dd",t,2);case"term":return this.inTags("dt",t,1);case"definition_list":return this.inTags("dl",t,2);case"bullet_list":return this.inTags("ul",t,2);case"task_list":return this.inTags("ul",t,2,{class:"task-list"});case"ordered_list":{const e={};return t.start&&1!==t.start&&(e.start=t.start.toString()),t.style&&!/1/.test(t.style)&&(e.type=t.style.replace(/[().]/g,"")),this.inTags("ol",t,2,e)}case"heading":return this.inTags("h"+t.level,t,1);case"footnote_reference":{let e="";const s=t.text;let n=this.footnoteIndex[s];return n||(n=this.nextFootnoteIndex,this.footnoteIndex[s]=n,this.nextFootnoteIndex++),e+=this.renderTag("a",t,{id:"fnref"+n,href:"#fn"+n,role:"doc-noteref"}),e+="<sup>",e+=this.escape(n.toString()),e+="</sup></a>",e}case"table":return this.inTags("table",t,2);case"caption":{let e="";return t.children.length>0&&(e+=this.inTags("caption",t,1)),e}case"row":return this.inTags("tr",t,2);case"cell":{const e={};return t.align&&"default"!==t.align&&(e.style=`text-align: ${t.align};`),this.inTags(t.head?"th":"td",t,1,e)}case"thematic_break":{let e="";return e+=this.renderTag("hr",t),e+="\n",e}case"code_block":{let e="";return e+=this.renderTag("pre",t),e+="<code",t.lang&&(e+=` class="language-${this.escapeAttribute(t.lang)}"`),e+=">",e+=this.escape(t.text),e+=this.renderCloseTag("code"),e+=this.renderCloseTag("pre"),e+="\n",e}case"raw_block":{let e="";return"html"===t.format&&(e+=t.text),e}case"str":return t.attributes||t.autoAttributes?`${this.renderTag("span",t)}${this.escape(t.text)}</span>`:this.escape(t.text);case"smart_punctuation":return this.smartPunctuationMap[t.type]||t.text;case"double_quoted":{let e="";return e+=this.smartPunctuationMap.left_double_quote||'"',e+=this.renderChildren(t),e+=this.smartPunctuationMap.right_double_quote||'"',e}case"single_quoted":{let e="";return e+=this.smartPunctuationMap.left_single_quote||"'",e+=this.renderChildren(t),e+=this.smartPunctuationMap.right_single_quote||"'",e}case"symb":return this.escape(`:${t.alias}:`);case"inline_math":{let e="";return e+=this.renderTag("span",t,{class:"math inline"}),e+=`\\(${this.escape(t.text)}\\)`,e+=this.renderCloseTag("span"),e}case"display_math":{let e="";return e+=this.renderTag("span",t,{class:"math display"}),e+=`\\[${this.escape(t.text)}\\]`,e+=this.renderCloseTag("span"),e}case"verbatim":{let e="";return e+=this.renderTag("code",t),e+=this.escape(t.text),e+=this.renderCloseTag("code"),e}case"raw_inline":{let e="";return"html"===t.format&&(e+=t.text),e}case"soft_break":return"\n";case"hard_break":return"<br>\n";case"non_breaking_space":return"&nbsp;";case"link":case"image":{const s={};let r=t.destination;if(t.reference){const a=this.references[t.reference]||this.autoReferences[t.reference];if(a){if(r=a.destination,"image"===t.tag?(s.alt=(0,n.getStringContent)(t),s.src=r):s.href=r,a.attributes)for(const e in a.attributes)t.attributes&&t.attributes[e]||(s[e]=a.attributes[e]);if(a.autoAttributes)for(const e in a.autoAttributes)t.autoAttributes&&t.autoAttributes[e]||(s[e]=a.autoAttributes[e])}else this.warn(new i.Warning(`Reference ${JSON.stringify(t.reference)} not found`,null===(e=null==t?void 0:t.pos)||void 0===e?void 0:e.end))}else"image"===t.tag?(s.alt=(0,n.getStringContent)(t),void 0!==r&&(s.src=r)):void 0!==r&&(s.href=r);return"image"===t.tag?this.renderTag("img",t,s):this.inTags("a",t,0,s)}case"url":case"email":{let e="";const s={};return"email"===t.tag?s.href="mailto:"+t.text:s.href=t.text,e+=this.renderTag("a",t,s),e+=this.escape(t.text),e+=this.renderCloseTag("a"),e}case"strong":return this.inTags("strong",t,0);case"emph":return this.inTags("em",t,0);case"span":return this.inTags("span",t,0);case"mark":return this.inTags("mark",t,0);case"insert":return this.inTags("ins",t,0);case"delete":return this.inTags("del",t,0);case"superscript":return this.inTags("sup",t,0);case"subscript":return this.inTags("sub",t,0);default:return""}}render(t){return this.references=t.references,this.autoReferences=t.autoReferences,this.renderAstNode(t)}}e.HTMLRenderer=HTMLRenderer;e.renderHTML=function(t,e={}){return new HTMLRenderer(e).render(t)}},"dML+":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderDjot=void 0;const n=s("P+sv"),i=s("wqKs"),isWhitespace=function(t){const e=t.tag;return"space"===e||"soft_break"===e||"hard_break"===e},verbatimDelim=function(t,e){const s=t.text.match(/(`+)/g),n={};if(s)for(const t in s)n[s[t].length]=!0;let i=e;for(;n[i];)i++;return"`".repeat(i)},toRoman=function(t){if(t<0||t>=4e3)return"?";let e="";for(;t>0;)if(t>=1e3)e+="M",t-=1e3;else if(t>=900)e+="CM",t-=900;else if(t>=500)e+="D",t-=500;else if(t>=400)e+="CD",t-=400;else if(t>=100)e+="C",t-=100;else if(t>=90)e+="XC",t-=90;else if(t>=50)e+="L",t-=50;else if(t>=40)e+="XL",t-=40;else if(t>=10)e+="X",t-=10;else if(9==t)e+="IX",t-=9;else if(t>=5)e+="V",t-=5;else if(4==t)e+="IV",t-=4;else{if(!(t>=1))throw new Error("toRoman encountered x = "+t);e+="I",t-=1}return e},formatNumber=function(t,e){const s=e.replace(/[a-zA-Z0-9]+/g,"$");let n;switch(e.replace(/[.()]/g,"")){case"1":n=t.toString();break;case"a":n=String.fromCodePoint(96+t%26);break;case"A":n=String.fromCodePoint(64+t%26);break;case"i":n=toRoman(t).toLowerCase();break;case"I":n=toRoman(t);break;default:throw new Error("formatNumber encountered unknown style "+e)}return s.replace("$",n)};class DjotRenderer{constructor(t,e={}){this.prefixes=[],this.buffer=[],this.startOfLine=!0,this.endOfPrefix=0,this.column=0,this.needsBlankLine=!1,this.handlers={doc:t=>{this.renderChildren(t.children),this.prefixes=[],this.cr(),Object.keys(t.references).length>0&&(this.cr(),this.newline());for(const e in t.references)this.renderNode(t.references[e]);Object.keys(t.footnotes).length;for(const e in t.footnotes)this.renderNode(t.footnotes[e]);this.prefixes=[],this.cr()},footnote:t=>{this.lit("[^"+t.label+"]:"),this.space(),this.needsBlankLine=!1,this.prefixes.push("  "),this.renderChildren(t.children),this.prefixes.pop(),this.blankline()},reference:t=>{this.lit("["),this.lit(t.label),this.lit("]:"),this.prefixes.push("  "),this.space(),this.lit(t.destination),this.wrap(),this.prefixes.pop(),this.blankline()},para:t=>{this.renderChildren(t.children),this.blankline()},thematic_break:()=>{this.lit("* * * * *"),this.blankline()},div:t=>{this.lit(":::"),this.cr(),this.renderChildren(t.children),this.cr(),this.lit(":::"),this.blankline()},heading:t=>{const e="#".repeat(t.level);this.lit(e+" "),this.prefixes.push(e+" "),this.renderChildren(t.children),this.prefixes.pop(),this.blankline()},block_quote:t=>{this.prefixes.push("> "),this.lit("> "),this.renderChildren(t.children),this.prefixes.pop(),this.blankline()},section:t=>{this.renderChildren(t.children)},code_block:t=>{const e=verbatimDelim(t,3);this.lit(e),t.lang&&this.lit(" "+t.lang),this.cr(),this.litlines(t.text),this.cr(),this.lit(e),this.blankline()},raw_block:t=>{const e=verbatimDelim(t,3);this.lit(e),this.lit(" ="+t.format),this.cr(),this.litlines(t.text),this.cr(),this.lit(e),this.blankline()},definition_list:t=>{const e=t.children;for(let t=0;t<e.length;t++){const s=e[t];t>0&&this.newline(),this.lit(":"),this.needsBlankLine=!1,this.space(),this.prefixes.push(" ".repeat(2)),this.renderChildren(s.children),this.prefixes.pop()}},ordered_list:t=>{const e=t.style,s=t.start||1,n=t.children,i=t.tight;for(let t=0;t<n.length;t++){const r=n[t];t>0&&(this.cr(),i||this.newline());const a=formatNumber(s+t,e);this.lit(a),this.needsBlankLine=!1,this.space(),this.prefixes.push(" ".repeat(a.length+1)),this.renderChildren(r.children),this.prefixes.pop()}i&&this.blankline()},bullet_list:t=>{const e=t.children,s=t.tight;for(let n=0;n<e.length;n++){const i=e[n];n>0&&(this.cr(),s||this.newline());const r=t.style;this.lit(r),this.needsBlankLine=!1,this.space(),this.prefixes.push(" ".repeat(r.length+1)),this.renderChildren(i.children),this.prefixes.pop()}s&&this.blankline()},task_list:t=>{const e=t.children,s=t.tight;for(let t=0;t<e.length;t++){const n=e[t];t>0&&(this.cr(),s||this.newline()),this.needsBlankLine=!1,this.lit(`- [${"checked"===n.checkbox?"X":" "}]`),this.space(),this.prefixes.push(" ".repeat(6)),this.renderChildren(n.children),this.prefixes.pop()}s&&this.blankline()},term:t=>{this.renderChildren(t.children),this.blankline()},definition:t=>{this.renderChildren(t.children)},table:t=>{const e=t.children.filter(n.isCaption),s=t.children.filter(n.isRow);for(let t=0;t<s.length;t++){const e=s[t];if("head"in e&&!e.head&&t>0&&s[t-1].head){const e=s[t-1];for(let t=0;t<e.children.length;t++){switch(0===t&&this.lit("|"),e&&e.children[t].align){case"left":this.lit(":--");break;case"right":this.lit("--:");break;case"center":this.lit(":-:");break;default:this.lit("---")}this.lit("|")}this.cr()}for(let t=0;t<e.children.length;t++){const s=e.children[t];0===t&&this.lit("|"),this.noWrap(()=>{"cell"===s.tag&&this.renderChildren(s.children)}),this.lit("|")}this.cr()}e.length>0&&e[0].children.length>0&&(this.newline(),this.lit("^ "),this.needsBlankLine=!1,this.prefixes.push("  "),this.renderChildren(e[0].children),this.prefixes.pop(),this.blankline()),this.blankline()},str:t=>{t.text.split(/  */).forEach((t,e)=>{e>0&&this.space(),this.out(t)})},space:()=>{this.space()},soft_break:()=>{this.soft_break()},smart_punctuation:t=>{this.lit(t.text)},non_breaking_space:()=>{this.lit("\\ ")},single_quoted:this.inlineContainer("'"),double_quoted:this.inlineContainer('"'),emph:this.inlineContainer("_"),strong:this.inlineContainer("*"),superscript:this.inlineContainer("^"),subscript:this.inlineContainer("~"),mark:this.inlineContainer("=",!0),delete:this.inlineContainer("-",!0),insert:this.inlineContainer("+",!0),footnote_reference:t=>{this.lit("[^"+t.text+"]")},symb:t=>{this.lit(":"+t.alias+":")},email:t=>{this.lit("<"+t.text+">")},url:t=>{this.lit("<"+t.text+">")},span:t=>{this.lit("["),this.renderChildren(t.children),this.lit("]")},link:t=>{this.lit("["),this.renderChildren(t.children),this.lit("]"),t.reference?(this.lit("["),t.reference!==(0,i.getStringContent)(t)&&this.lit(t.reference),this.lit("]")):t.destination?(this.lit("("),this.lit(t.destination),this.lit(")")):this.lit("()")},image:t=>{this.lit("!["),this.renderChildren(t.children),this.lit("]"),t.reference?(this.lit("["),t.reference!==(0,i.getStringContent)(t)&&this.lit(t.reference),this.lit("]")):t.destination?(this.lit("("),this.lit(t.destination),this.lit(")")):this.lit("()")},raw_inline:t=>{this.verbatimNode(t),this.lit("{="+t.format+"}")},verbatim:t=>{this.verbatimNode(t)},inline_math:t=>{this.lit("$"),this.verbatimNode(t)},display_math:t=>{this.lit("$$"),this.verbatimNode(t)}},this.doc=t,this.wrapWidth=(null==e?void 0:e.wrapWidth)||0}escape(t){return t=t.replace(/([~`'"${}[\]^<>\\*_]|-(?=-)|!(=\[)|\.(?=\.))/g,"\\$1"),0!==this.column&&this.column!==this.endOfPrefix||(t=t.replace(/^#/,"\\#")),t}out(t){this.lit(this.escape(t))}doBlankLines(){this.needsBlankLine&&(this.cr(),this.newline(),this.needsBlankLine=!1)}lit(t){this.buffer.push(t),this.column+=t.length,this.startOfLine=!1}blankline(){this.needsBlankLine=!0}newline(){if(this.endOfPrefix===this.column)for(;/  *$|^$/.test(this.buffer[this.buffer.length-1]);)this.buffer[this.buffer.length-1]=this.buffer[this.buffer.length-1].replace(/  *$/,""),""===this.buffer[this.buffer.length-1]&&this.buffer.pop();if(this.endOfPrefix=0,this.column=0,this.buffer.push("\n"),this.prefixes.length>0){for(let t=0,e=this.prefixes.length;t<e;t++)this.buffer.push(this.prefixes[t]),this.column+=this.prefixes[t].length;this.endOfPrefix=this.column}this.startOfLine=!0}cr(){this.startOfLine||this.newline()}wrap(){if(this.wrapWidth<=0)return;let t=this.buffer.length-1;if(!this.startOfLine&&this.buffer.length>0&&this.column>this.wrapWidth){let e;for(;t>=0&&(e=this.buffer[t]," "!==e);){if(/^[ \r\n]+$/.test(e))return;t--}}if(t<this.buffer.length-1){const e=this.buffer.splice(t+1);" "===this.buffer[this.buffer.length-1]&&this.buffer.pop(),this.newline(),this.startOfLine=!0;for(let t=0;t<e.length;t++)this.buffer.push(e[t]),this.column+=e[t].length,this.startOfLine=!1}}space(){this.wrap(),this.lit(" ")}soft_break(){0===this.wrapWidth?this.newline():this.space()}needsBraces(t){return function(t){return t.children[0]&&isWhitespace(t.children[0])}(t)||function(t){return t.children[0]&&isWhitespace(t.children[t.children.length-1])}(t)||this.buffer.length>0&&/\w$/.test(this.buffer[this.buffer.length-1])}noWrap(t){const e=this.wrapWidth;this.wrapWidth=-1,t(),this.wrapWidth=e}inlineContainer(t,e){const s=this;return function(n){(e=e||s.needsBraces(n))&&s.lit("{"),s.lit(t),s.renderChildren(n.children),s.lit(t),e&&s.lit("}")}}litlines(t){const e=t.split(/\r?\n/);""===e[e.length-1]&&e.pop();for(const t of e)this.lit(t),this.cr()}verbatimNode(t){const e=verbatimDelim(t,1);this.lit(e),/^`/.test(t.text)&&this.lit(" "),this.lit(t.text),/`$/.test(t.text)&&this.lit(" "),this.lit(e)}renderChildren(t){for(let e=0,s=t.length;e<s;e++)this.renderNode(t[e]);t[0]&&!(0,n.isBlock)(t[0])&&this.wrap()}renderNode(t){this.doBlankLines();const e=this.handlers[t.tag];if(!e)throw new Error("No renderer defined for node type "+t.tag);t.attributes&&(0,n.isBlock)(t)&&(this.renderAttributes(t),this.cr()),e(t),t.attributes&&(0,n.isInline)(t)&&this.renderAttributes(t)}renderAttributes(t){if(!t.attributes||0===Object.keys(t.attributes).length)return;const e=t.attributes;this.lit("{");let s=!0;(0,n.isBlock)(t)&&this.prefixes.push(" ");for(const t in e){if(s||this.space(),"id"===t)this.lit("#"),this.lit(e[t]);else if("class"===t){const s=e[t].split(/  */);for(let t=0;t<s.length;t++)t>0&&this.space(),this.lit("."),this.lit(s[t])}else this.lit(t),this.lit('="'),this.out(e[t]),this.lit('"');s=!1}(0,n.isBlock)(t)&&this.prefixes.pop(),this.lit("}")}render(){return this.renderNode(this.doc),this.buffer.join("")}}e.renderDjot=function(t,e={}){return new DjotRenderer(t,e).render()}},iAPQ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=void 0,e.version="0.3.1"},kl7G:function(t,e,s){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeParser=void 0,function(t){t[t.SCANNING=0]="SCANNING",t[t.SCANNING_ID=1]="SCANNING_ID",t[t.SCANNING_CLASS=2]="SCANNING_CLASS",t[t.SCANNING_KEY=3]="SCANNING_KEY",t[t.SCANNING_VALUE=4]="SCANNING_VALUE",t[t.SCANNING_BARE_VALUE=5]="SCANNING_BARE_VALUE",t[t.SCANNING_QUOTED_VALUE=6]="SCANNING_QUOTED_VALUE",t[t.SCANNING_QUOTED_VALUE_CONTINUATION=7]="SCANNING_QUOTED_VALUE_CONTINUATION",t[t.SCANNING_ESCAPED=8]="SCANNING_ESCAPED",t[t.SCANNING_ESCAPED_IN_CONTINUATION=9]="SCANNING_ESCAPED_IN_CONTINUATION",t[t.SCANNING_COMMENT=10]="SCANNING_COMMENT",t[t.FAIL=11]="FAIL",t[t.DONE=12]="DONE",t[t.START=13]="START"}(n||(n={}));const i=/^[a-zA-Z0-9_:-]/,r=[];r[n.START]=function(t,e){return"{"===t.subject.charAt(e)?n.SCANNING:n.FAIL},r[n.FAIL]=function(t,e){return n.FAIL},r[n.DONE]=function(t,e){return n.DONE},r[n.SCANNING]=function(t,e){const s=t.subject.charAt(e);return"\n"===s||"\r"===s?n.SCANNING:" "===s||"\t"===s?(t.addEvent(e,e,"attr_space"),n.SCANNING):"}"===s?n.DONE:"#"===s?(t.begin=e,t.addEvent(e,e,"attr_id_marker"),n.SCANNING_ID):"%"===s?(t.begin=e,n.SCANNING_COMMENT):"."===s?(t.begin=e,t.addEvent(e,e,"attr_class_marker"),n.SCANNING_CLASS):function(t){return null!==i.exec(t)}(s)?(t.begin=e,n.SCANNING_KEY):n.FAIL},r[n.SCANNING_COMMENT]=function(t,e){const s=t.subject.charAt(e);return"%"===s?(t.begin&&e>t.begin&&t.addEvent(t.begin,e,"comment"),n.SCANNING):"}"==s?n.DONE:n.SCANNING_COMMENT},r[n.SCANNING_ID]=function(t,e){const s=t.subject.charAt(e);return null!==/^[^\]\[~!@#$%^&*(){}`,.<>\\|=+/?\s]/.exec(s)?n.SCANNING_ID:"}"===s?(t.begin&&t.lastpos&&t.lastpos>t.begin&&t.addEvent(t.begin+1,t.lastpos,"id"),t.begin=null,n.DONE):null!==/^\s/.exec(s)?(t.begin&&t.lastpos&&t.lastpos>t.begin&&t.addEvent(t.begin+1,t.lastpos,"id"),"\r"!==s&&"\n"!==s&&t.addEvent(e,e,"attr_space"),t.begin=null,n.SCANNING):n.FAIL},r[n.SCANNING_CLASS]=function(t,e){const s=t.subject.charAt(e);return null!==/^\w/.exec(s)||"_"===s||"-"===s||":"===s?n.SCANNING_CLASS:"}"===s?(t.begin&&t.lastpos&&t.lastpos>t.begin&&t.addEvent(t.begin+1,t.lastpos,"class"),t.begin=null,n.DONE):null!==/^\s/.exec(s)?(t.begin&&t.lastpos&&t.lastpos>t.begin&&t.addEvent(t.begin+1,t.lastpos,"class"),"\r"!==s&&"\n"!==s&&t.addEvent(e,e,"attr_space"),t.begin=null,n.SCANNING):n.FAIL},r[n.SCANNING_KEY]=function(t,e){const s=t.subject.charAt(e);return"="===s&&t.begin&&t.lastpos?(t.addEvent(t.begin,t.lastpos,"key"),t.addEvent(e,e,"attr_equal_marker"),t.begin=null,n.SCANNING_VALUE):null!==/^[a-zA-Z0-9_:-]/.exec(s)?n.SCANNING_KEY:n.FAIL},r[n.SCANNING_VALUE]=function(t,e){const s=t.subject.charAt(e);return'"'===s?(t.begin=e,t.addEvent(e,e,"attr_quote_marker"),n.SCANNING_QUOTED_VALUE):null!==/^[a-zA-Z0-9_:-]/.exec(s)?(t.begin=e,n.SCANNING_BARE_VALUE):n.FAIL},r[n.SCANNING_BARE_VALUE]=function(t,e){const s=t.subject.charAt(e);return null!==/^[a-zA-Z0-9_:-]/.exec(s)?n.SCANNING_BARE_VALUE:"}"===s&&t.begin&&t.lastpos?(t.addEvent(t.begin,t.lastpos,"value"),t.begin=null,n.DONE):/^\s/.exec(s)&&t.begin&&t.lastpos?(t.addEvent(t.begin,t.lastpos,"value"),"\r"!==s&&"\n"!==s&&t.addEvent(e,e,"attr_space"),t.begin=null,n.SCANNING):n.FAIL},r[n.SCANNING_ESCAPED]=function(t,e){return n.SCANNING_QUOTED_VALUE},r[n.SCANNING_ESCAPED_IN_CONTINUATION]=function(t,e){return n.SCANNING_QUOTED_VALUE_CONTINUATION},r[n.SCANNING_QUOTED_VALUE]=function(t,e){const s=t.subject.charAt(e);return'"'===s&&t.begin&&t.lastpos?(t.addEvent(t.begin+1,t.lastpos,"value"),t.addEvent(e,e,"attr_quote_marker"),t.begin=null,n.SCANNING):"\n"===s&&t.begin&&t.lastpos?(t.addEvent(t.begin+1,e,"value"),t.begin=null,n.SCANNING_QUOTED_VALUE_CONTINUATION):"\\"===s?n.SCANNING_ESCAPED:n.SCANNING_QUOTED_VALUE},r[n.SCANNING_QUOTED_VALUE_CONTINUATION]=function(t,e){const s=t.subject.charAt(e);return null===t.begin&&(t.begin=e),'"'===s&&t.begin&&t.lastpos?(t.addEvent(e,e,"attr_quote_marker"),t.addEvent(t.begin,t.lastpos,"value"),t.begin=null,n.SCANNING):"\n"===s&&t.begin&&t.lastpos?(t.addEvent(t.begin,e,"value"),t.begin=null,n.SCANNING_QUOTED_VALUE_CONTINUATION):"\\"===s?n.SCANNING_ESCAPED_IN_CONTINUATION:n.SCANNING_QUOTED_VALUE_CONTINUATION};e.AttributeParser=class AttributeParser{constructor(t){this.subject=t,this.state=n.START,this.begin=null,this.lastpos=null,this.matches=[]}addEvent(t,e,s){this.matches.push({startpos:t,endpos:e,annot:s})}feed(t,e){let s=t;for(;s<=e;){if(this.state=r[this.state](this,s),this.state===n.DONE)return{status:"done",position:s};if(this.state===n.FAIL)return this.lastpos=s,{status:"fail",position:s};this.lastpos=s,s+=1}return{status:"continue",position:e}}}},shDi:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEvents=void 0;const n=s("KaJk"),i=s("kl7G"),r=s("+aVN"),a=s("zPqR"),getListStyles=function(t){return"+"===t||"-"===t||"*"===t||":"===t?[t]:/^[+*-] \[[Xx ]\]/.exec(t)?["X"]:/^[(]?[0-9]+[).]/.exec(t)?[t.replace(/[0-9]+/,"1")]:/^[(]?[ivxlcdm][).]/.exec(t)?[t.replace(/[a-z]+/,"i"),t.replace(/[a-z]+/,"a")]:/^[(]?[IVXLCDM][).]/.exec(t)?[t.replace(/[A-Z]+/,"I"),t.replace(/[A-Z]+/,"A")]:/^[(]?[ivxlcdm]+[).]/.exec(t)?[t.replace(/[a-z]+/,"i")]:/^[(]?[IVXLCDM]+[).]/.exec(t)?[t.replace(/[A-Z]+/,"I")]:/^[(]?[a-z][).]/.exec(t)?[t.replace(/[a-z]/,"a")]:/^[(]?[A-Z][).]/.exec(t)?[t.replace(/[A-Z]/,"A")]:[]},o=(0,r.pattern)("[ \\t]*\\r?\\n"),c=(0,r.pattern)("^\\w+\\s"),l=(0,r.pattern)("[ \\t\\r\\n]"),h=(0,r.pattern)("[^ \\t\\r\\n]+"),d=(0,r.pattern)("[>][ \\t\\r\\n]"),u=(0,r.pattern)("#+"),p=(0,r.pattern)("(~~~~*|````*)([ \\t]*)([^ \\t\\r\\n`]*)[ \\t]*\\r?\\n"),f=(0,r.pattern)("(:?)--*(:?)([ \\t]*\\|[ \\t]*)"),b=(0,r.pattern)("[^`|\\r\\n]*(?:[|]|`+)"),g=(0,r.pattern)("\\^[ \\t]+"),m=(0,r.pattern)("\\[\\^([^\\]]+)\\]:[ \\t\\r\\n]"),_=(0,r.pattern)("[-*][ \t]*[-*][ \\t]*[-*][-* \\t]*\\r?\\n"),k=(0,r.pattern)("(::::*)[ \\t]*\\r?\\n"),A=(0,r.pattern)("(::::*)[ \\t]*"),N=(0,r.pattern)("([\\w_-]*)[ \\t]*\\r?\\n"),C=(0,r.pattern)("\\[([^\\]\\r\\n]*)\\]:[ \\t]*([^ \\t\\r\\n]*)[\\r\\n]"),P=(0,r.pattern)("(\\|[^\\r\\n]*\\|)[ \\t]*\\r?\\n"),x=(0,r.pattern)("(:?[-*+:]|\\([0-9]+\\)|[0-9]+[.)]|[ivxlcdmIVXLCDM]+[.)]|\\([ivxlcdmIVXLCDM]+\\)|[a-zA-Z][.)]|\\([a-zA-Z]\\))[ \\t\\r\\n]"),I=(0,r.pattern)("[*+-] \\[[Xx ]\\][ \\t\\r\\n]");var M;!function(t){t[t.None=0]="None",t[t.Inline=1]="Inline",t[t.Block=2]="Block",t[t.Text=3]="Text",t[t.Cells=4]="Cells",t[t.Attributes=5]="Attributes",t[t.ListItem=6]="ListItem"}(M||(M={}));class Container{constructor(t,e){this.name=t.name,this.type=t.type,this.content=t.content,this.continue=t.continue,this.close=t.close,this.indent=0,this.inlineParser=null,this.attributeParser=null,this.extra=e}}class EventParser{constructor(t,e={}){"\n"!==t.charAt(t.length-1)&&(t+="\n"),this.subject=t,this.maxoffset=t.length-1,this.options=e,this.warn=e.warn||(()=>{}),this.indent=0,this.startline=0,this.starteol=0,this.endeol=0,this.matches=[],this.containers=[],this.pos=0,this.lastMatchedContainer=0,this.finishedLine=!1,this.returned=0,this.paraSpec={name:"para",type:M.Block,content:M.Inline,continue:t=>null===this.find(l),open:t=>(this.addContainer(new Container(t,{})),this.addMatch(this.pos,this.pos,"+para"),!0),close:()=>{this.getInlineMatches(),this.containers.pop();const t=this.matches[this.matches.length-1],e=t&&t.endpos+1||this.pos;this.addMatch(e,e,"-para")}},this.specs=[{name:"block_quote",type:M.Block,content:M.Block,continue:t=>null!==this.find(d)&&(this.pos=this.pos+1,!0),open:t=>null!==this.find(d)&&(this.addContainer(new Container(t,{})),this.addMatch(this.pos,this.pos,"+block_quote"),this.pos=this.pos+1,!0),close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-block_quote")}},{name:"heading",type:M.Block,content:M.Inline,continue:t=>{const e=this.find(u);return!(!e||t.extra.level!==e.endpos-e.startpos+1||!(0,r.find)(this.subject,l,e.endpos+1))&&(this.pos=e.endpos+1,!0)},open:t=>{const e=this.find(u);if(e&&(0,r.find)(this.subject,l,e.endpos+1)){const s=e.endpos-e.startpos+1;return this.addContainer(new Container(t,{level:s})),this.addMatch(e.startpos,e.endpos,"+heading"),this.pos=e.endpos+1,!0}return!1},close:()=>{this.getInlineMatches(),this.containers.pop();const t=this.matches[this.matches.length-1],e=t&&t.endpos+1||this.pos;this.addMatch(e,e,"-heading")}},{name:"caption",type:M.Block,content:M.Inline,continue:t=>null===(0,r.find)(this.subject,l,this.pos),open:t=>{const e=this.find(g);return!!e&&(this.pos=e.endpos+1,this.addContainer(new Container(t,{})),this.addMatch(this.pos,this.pos,"+caption"),!0)},close:()=>{this.getInlineMatches(),this.containers.pop(),this.addMatch(this.pos-1,this.pos-1,"-caption")}},{name:"footnote",type:M.Block,content:M.Block,continue:t=>this.indent>(t.extra.indent||0)||this.pos===this.starteol,open:t=>{const e=this.find(m);if(e){const s=e.startpos,n=e.endpos,i=e.captures[0];return this.addContainer(new Container(t,{note_label:i,indent:this.indent})),this.addMatch(s,s,"+footnote"),this.addMatch(s+2,n-3,"note_label"),this.pos=n,!0}return!1},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-footnote")}},{name:"reference_definition",type:M.Block,content:M.None,continue:t=>{if(t.extra.indent>=this.indent)return!1;const e=this.find(h);return!!(this.pos<this.starteol&&e&&e.endpos===this.starteol-1)&&(this.addMatch(this.pos,this.starteol-1,"reference_value"),this.pos=this.starteol,!0)},open:t=>{const e=this.find(C);if(e){const s=e.captures[0],n=e.captures[1];return this.addContainer(new Container(t,{key:s,indent:this.indent})),this.addMatch(e.startpos,e.startpos,"+reference_definition"),this.addMatch(e.startpos,e.startpos+s.length+1,"reference_key"),n.length>0&&this.addMatch(this.starteol-n.length,this.starteol-1,"reference_value"),this.pos=this.starteol-1,!0}return!1},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-reference_definition")}},{name:"thematic_break",type:M.Block,content:M.None,continue:t=>!1,open:t=>{const e=this.find(_);return!!e&&(this.addContainer(new Container(t,{})),this.addMatch(e.startpos,e.endpos,"thematic_break"),this.pos=e.endpos,!0)},close:()=>{this.containers.pop()}},{name:"list",type:M.Block,content:M.ListItem,continue:t=>{if(this.indent>t.extra.indent||this.pos===this.starteol)return!0;{const e=this.find(x);if(null===e)return!1;let s=this.subject.substring(e.startpos,e.endpos);const n=this.find(I);null!==n&&(s=this.subject.substring(n.startpos,n.startpos+5));const i=getListStyles(s),r=[];for(const e of t.extra.styles)i.includes(e)&&r.push(e);if(r.length>0)return t.extra.styles=r,!0}return!1},open:t=>{const e=this.find(x);if(null===e)return!1;const s=e.startpos,n=e.endpos;let i=this.subject.substring(s,n);const r=this.find(I);null!==r&&(i=this.subject.substring(r.startpos,r.startpos+5));const a=getListStyles(i);if(0===a.length)return!1;const o={styles:a,indent:this.indent};this.addContainer(new Container(t,o));let c="+list";for(const t of a)c=c+"|"+t;return this.addMatch(s,n-1,c),!0},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-list")}},{name:"list_item",type:M.ListItem,content:M.Block,continue:t=>this.indent>t.extra.indent||this.pos===this.starteol,open:t=>{const e=this.find(x);if(null===e)return!1;const s=e.startpos,n=e.endpos;let i=this.subject.substring(s,n),r=null;const a=this.find(I);null!==a&&(i=this.subject.substring(a.startpos,a.startpos+5),r=this.subject.substring(a.startpos+3,a.startpos+4));const o=getListStyles(i);if(0===o.length)return!1;const c={styles:o,indent:this.indent};this.addContainer(new Container(t,c));let l="+list_item";for(const t of o)l=l+"|"+t;return this.addMatch(s,n-1,l),this.pos=n,r&&(" "===r?this.addMatch(s+2,s+4,"checkbox_unchecked"):this.addMatch(s+2,s+4,"checkbox_checked"),this.pos=s+5),!0},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-list_item")}},{name:"table",type:M.Block,content:M.Cells,continue:t=>{const e=this.find(P);if(e){const t=e.captures[0];return this.parseTableRow(e.startpos,e.startpos+t.length-1)}return!1},open:t=>{const e=this.find(P);if(e){this.addContainer(new Container(t,{columns:0}));const s=e.captures[0];return this.addMatch(e.startpos,e.startpos,"+table"),!!this.parseTableRow(e.startpos,e.startpos+s.length-1)||(this.matches.pop(),this.containers.pop(),!1)}return!1},close:()=>{this.containers.pop(),this.addMatch(this.pos,this.pos,"-table")}},{name:"attributes",type:M.Block,content:M.Attributes,open:t=>{if(123===this.subject.codePointAt(this.pos)){const e=new i.AttributeParser(this.subject),s=e.feed(this.pos,this.starteol);if("fail"===s.status)return!1;if("done"===s.status&&null===(0,r.find)(this.subject,o,s.position+1))return!1;{const n=this.addContainer(new Container(t,{status:s.status,indent:this.indent,startpos:this.pos,slices:[]}));return n.attributeParser=e,n.extra.slices=[{startpos:this.pos,endpos:this.starteol}],this.pos=this.starteol,!0}}return!1},continue:t=>{if("done"===t.extra.status)return!1;if(t.attributeParser&&this.indent>t.extra.indent){t.extra.slices.push({startpos:this.pos,endpos:this.starteol});const e=t.attributeParser.feed(this.pos,this.endeol);if(t.extra.status=e.status,"fail"!==e.status||!(0,r.find)(this.subject,o,e.position+1))return this.pos=this.starteol,!0}this.addMatch(t.extra.startpos,t.extra.startpos,"+para");const e=this.containers.pop(),s=this.addContainer(new Container(this.paraSpec,{}));if(!s.inlineParser||!e)throw new Error("Missing inlineParser or attrContainer");return s.inlineParser.attributeSlices=e.extra.slices,s.inlineParser.reparseAttributes(),this.pos=s.inlineParser.lastpos+1,!0},close:()=>{const t=this.containers.pop();if(t)if("continue"===t.extra.status){this.addMatch(t.extra.startpos,t.extra.startpos,"+para");const e=this.addContainer(new Container(this.paraSpec,{}),!0);if(!e||!e.inlineParser)throw new Error("Could not add paragraph");e.inlineParser.attributeSlices=t.extra.slices,e.inlineParser.reparseAttributes(),e.close()}else{if(this.addMatch(t.extra.startpos,t.extra.startpos,"+block_attributes"),t.attributeParser){const e=t.attributeParser.matches;for(const t of e)this.matches.push(t)}this.addMatch(this.pos,this.pos,"-block_attributes")}}},{name:"fenced_div",type:M.Block,content:M.Block,continue:t=>{const e=this.tip();if(e&&"code_block"===e.name)return!0;const s=this.find(k);if(s&&t.extra.colons){const e=s.captures[0];if(e.length>=t.extra.colons)return t.extra.endFenceStartpos=s.startpos,t.extra.endFenceEndpos=s.startpos+e.length-1,this.pos=s.endpos,!1}return!0},open:t=>{const e=this.find(A);if(!e)return!1;const s=e.captures[0],n=(0,r.find)(this.subject,N,e.endpos+1);if(!n)return!1;const i=n.startpos,a=n.captures[0];return this.addContainer(new Container(t,{colons:s.length})),this.addMatch(e.startpos,e.endpos,"+div"),a.length>0&&this.addMatch(i,i+a.length-1,"class"),this.pos=n.endpos+1,this.finishedLine=!0,!0},close:()=>{const t=this.containers.pop();if(!t)return;const e=t.extra.endFenceStartpos||this.pos,s=t.extra.endFenceEndpos||this.pos;this.addMatch(e,s,"-div"),e===s&&this.warn(new n.Warning("Unclosed div",this.pos))}},{name:"code_block",type:M.Block,content:M.Text,continue:t=>{const e=this.find(t.extra.closePattern);return!e||(t.extra.endFenceStartpos=e.startpos,t.extra.endFenceEndpos=e.startpos+e.captures[0].length-1,this.pos=e.endpos,this.finishedLine=!0,!1)},open:t=>{const e=this.find(p);if(e){const[s,n,i]=e.captures,a="="===i.charAt(0),o=(0,r.pattern)("("+s+s.substring(0,1)+"*)[ \\t]*[\\r\\n]");if(this.addContainer(new Container(t,{closePattern:o})).indent=this.indent,this.addMatch(e.startpos,e.startpos+s.length-1,"+code_block"),i.length>0){const t=e.startpos+s.length+n.length;a?this.addMatch(t,t+i.length-1,"raw_format"):this.addMatch(t,t+i.length-1,"code_language")}return this.pos=e.endpos,this.finishedLine=!0,!0}return!1},close:()=>{const t=this.containers.pop();if(!t)return;const e=t.extra.endFenceStartpos||this.pos,s=t.extra.endFenceEndpos||this.pos;this.addMatch(e,s,"-code_block"),e===s&&this.warn(new n.Warning("Unclosed code block",this.pos))}}]}find(t){return(0,r.find)(this.subject,t,this.pos)}tip(){return this.containers.length>=1?this.containers[this.containers.length-1]:null}addMatch(t,e,s){this.matches.push({startpos:Math.min(t,this.maxoffset),endpos:Math.min(e,this.maxoffset),annot:s})}getInlineMatches(){var t;const e=null===(t=this.tip())||void 0===t?void 0:t.inlineParser;if(e){let t;for(const s of e.getMatches())t&&"str"===t.annot&&"str"===s.annot&&s.startpos===t.endpos+1?this.matches[this.matches.length-1].endpos=s.endpos:this.matches.push(s),t=s}}closeUnmatchedContainers(){const t=this.lastMatchedContainer;let e=this.tip();for(;e&&this.containers.length-1>t;)e.close(),e=this.tip()}addContainer(t,e){e||this.closeUnmatchedContainers();let s=this.tip();for(;s&&s.content!==t.type;)s.close(),s=this.tip();return t.content===M.Inline&&(t.inlineParser=new a.InlineParser(this.subject,{warn:this.warn})),this.containers.push(t),t}skipSpace(){const t=this.subject;let e=this.pos;for(;32===(s=t.codePointAt(e))||9===s;)e++;var s;this.indent=e-this.startline,this.pos=e}getEol(){const t=this.subject;let e=this.pos;for(;10!==(s=t.codePointAt(e))&&13!==s;)e++;var s;this.starteol=e,13===t.codePointAt(e)&&10===t.codePointAt(e+1)?this.endeol=e+1:this.endeol=e}parseTableCell(){const t=new a.InlineParser(this.subject,{warn:this.warn});let e=!1;const s=this.pos-1;let n=s;for(this.skipSpace();!e;){const s=this.find(b);if(null===s){e=!1;break}{const i=s.endpos;"`"===this.subject.charAt(i)||t.inVerbatim()||"\\"===this.subject.charAt(i-1)?t.feed(this.pos,i):(t.feed(this.pos,i-1),n=i,e=!0),this.pos=i+1}}if(e){return{startpos:s,endpos:n,matches:t.getMatches()}}return null}parseTableRow(t,e){const s=this.matches.length,n=this.pos;this.addMatch(t,t,"+row"),this.pos++;const i=[];let a=this.pos,o=!1;for(;!o;){const t=(0,r.find)(this.subject,f,a);if(null===t)break;{const[e,s,n]=t.captures;let r="separator_default";if(e.length>0&&s.length>0?r="separator_center":s.length>0?r="separator_right":e.length>0&&(r="separator_left"),i.push({startpos:t.startpos,endpos:t.endpos-n.length,annot:r}),a=t.endpos+1,a===this.starteol){o=!0;break}}}if(o){for(const t of i)this.addMatch(t.startpos,t.endpos,t.annot);return this.addMatch(this.starteol-1,this.starteol-1,"-row"),this.pos=this.starteol,this.finishedLine=!0,!0}for(;this.pos<=e;){const t=this.parseTableCell();if(null===t){for(this.pos=n;this.matches.length>s;)this.matches.pop();return!1}{this.addMatch(t.startpos,t.startpos,"+cell");const e=t.matches;e.forEach((t,s)=>{const n=t.startpos;let i=t.endpos;if(s===e.length-1&&"str"===t.annot)for(;32===this.subject.codePointAt(i)&&i>=n;)i-=1;this.addMatch(n,i,t.annot)}),this.addMatch(t.endpos,t.endpos,"-cell")}}return this.addMatch(this.pos,this.pos,"-row"),this.pos=this.starteol,this.finishedLine=!0,!0}[Symbol.iterator](){const t=this.specs,e=this.subject.length;this.returned=0;const s=this;return{next(){for(;s.pos<e;){if(s.matches.length>0&&s.returned<s.matches.length)return s.returned=s.returned+1,{value:s.matches[s.returned-1],done:!1};s.indent=0,s.startline=s.pos,s.finishedLine=!1,s.getEol(),s.lastMatchedContainer=-1;let e=0;for(;e<s.containers.length;){const t=s.containers[e];if(s.skipSpace(),!t.continue(t))break;s.lastMatchedContainer=e,e+=1}if(s.finishedLine)for(;s.containers.length>0&&s.lastMatchedContainer<s.containers.length-1;){const t=s.tip();t&&t.close()}if(!s.finishedLine){s.skipSpace();let e=s.pos===s.starteol,n=!1,i=s.containers[s.lastMatchedContainer],r=!(e||i&&i.content!==M.Block&&i.content!==M.ListItem||s.find(c));for(;r;){r=!1;for(const e of t)if((!i&&e.type===M.Block||i&&i.content===e.type)&&e.open(e)){if(!s.tip())throw new Error("No tip after opening container");s.lastMatchedContainer=s.containers.length-1,i=s.containers[s.lastMatchedContainer],s.finishedLine?r=!1:(s.skipSpace(),n=!0,r=e.content===M.Block||e.content===M.ListItem);break}}if(!s.finishedLine){s.skipSpace(),e=s.pos===s.starteol;let t=s.tip();if(!e&&!n&&s.lastMatchedContainer<s.containers.length-1&&t&&t.content===M.Inline||s.closeUnmatchedContainers(),t=s.tip(),t&&t.content!==M.Block||(e?n||s.addMatch(s.pos,s.endeol,"blankline"):(s.paraSpec.open(s.paraSpec),t=s.tip(),t&&(t.inlineParser=new a.InlineParser(s.subject,s.options)))),t&&t.content===M.Text){let e=s.pos;null!==t.indent&&s.indent>t.indent&&(e-=s.indent-t.indent),s.addMatch(e,s.endeol,"str")}else t&&t.content===M.Inline&&!e&&t.inlineParser&&t.inlineParser.feed(s.pos,s.endeol)}}s.pos=(s.endeol||s.pos)+1}return s.lastMatchedContainer=-1,s.closeUnmatchedContainers(),s.matches.length>0&&s.returned<s.matches.length?(s.returned=s.returned+1,{value:s.matches[s.returned-1],done:!1}):{value:{startpos:s.pos,endpos:s.pos,annot:""},done:!0}}}}}e.parseEvents=function(t,e={}){return new EventParser(t,e)}},wqKs:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isInline=e.isCaption=e.isRow=e.isBlock=e.getStringContent=e.renderAST=e.parse=void 0;const n=s("shDi"),i=s("KaJk"),r=s("P+sv");Object.defineProperty(e,"isRow",{enumerable:!0,get:function(){return r.isRow}}),Object.defineProperty(e,"isBlock",{enumerable:!0,get:function(){return r.isBlock}}),Object.defineProperty(e,"isCaption",{enumerable:!0,get:function(){return r.isCaption}}),Object.defineProperty(e,"isInline",{enumerable:!0,get:function(){return r.isInline}});const getStringContent=function(t){const e=[];return addStringContent(t,e),e.join("")};e.getStringContent=getStringContent;const addStringContent=function(t,e){if("text"in t)e.push(t.text);else if(!("tag"in t)||"soft_break"!==t.tag&&"hard_break"!==t.tag){if("children"in t)for(const s of t.children)addStringContent(s,e)}else e.push("\n")},trimVerbatim=function(t){return t.replace(/^ `/,"`").replace(/` $/,"`")},a={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3,I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},romanToNumber=function(t){let e=0,s=0,n=t.length-1;for(;n>=0;){const i=t.charAt(n),r=a[i];if(!r)throw new Error("Encountered bad character in roman numeral "+t);r<s?e-=r:e+=r,s=r,n-=1}return e};var o;!function(t){t[t.Normal=0]="Normal",t[t.Verbatim=1]="Verbatim",t[t.Literal=2]="Literal"}(o||(o={}));const normalizeLabel=function(t){return t.trim().replace(/[ \t\r\n]+/g," ")};e.parse=function(t,e={}){const s=[-1];if(e.sourcePositions)for(let e=0;e<t.length;e++)"\n"===t[e]&&s.push(e);const getSourceLoc=function(t){let e=0,n=s.length-1,i=0,r=0;for(;!i;){const a=e+~~((n-e)/2);s[a]>t?n=a:s[a]<=t&&(a===n||s[a+1]>t?(i=a+1,r=t-s[a]):e=e===a&&e<n?a+1:a)}return{line:i,col:r,offset:t}};let r=o.Normal,a="";const c={},l={},h={},d={},u={};let p=0;const f=(0,n.parseEvents)(t,e),b=e.warn||(()=>{}),addBlockAttributes=function(t){if(Object.keys(u).length>0){t.attributes=t.attributes||{};for(const e in u)t.attributes[e]=u[e],delete u[e]}},pushContainer=function(t){const e={children:[],data:{},pos:t,attributes:void 0};addBlockAttributes(e),m.push(e)},popContainer=function(t){const e=m.pop();if(!e)throw new Error("Container stack is empty (popContainer)");return t&&e.pos&&(e.pos.end=t.end),e},topContainer=function(){if(m.length>0)return m[m.length-1];throw new Error("Container stack is empty (topContainer)")},getTip=function(){const t=topContainer();return t.children.length>0?t.children[t.children.length-1]:t},addChildToTip=function(t){if(m.length>0){m[m.length-1].children.push(t)}},g={str:(e,s,n,i)=>{const c=t.substring(s,n+1);r===o.Normal?addChildToTip({tag:"str",text:c,pos:i}):a+=c},soft_break:(t,e,s,n)=>{r===o.Normal?addChildToTip({tag:"soft_break",pos:n}):a+="\n"},escape:(t,e,s,n)=>{r===o.Verbatim&&(a+="\\")},hard_break:(t,e,s,n)=>{r===o.Normal?addChildToTip({tag:"hard_break",pos:n}):a+="\n"},non_breaking_space:(t,e,s,n)=>{r===o.Verbatim?a+="\\ ":addChildToTip({tag:"non_breaking_space",pos:n})},symb:(e,s,n,i)=>{if(r===o.Normal){const e=t.substring(s+1,n);addChildToTip({tag:"symb",alias:e,pos:i})}else{const e=t.substring(s,n+1);a+=e}},footnote_reference:(e,s,n,i)=>{const r=t.substring(s+2,n);addChildToTip({tag:"footnote_reference",text:normalizeLabel(r),pos:i})},"+reference_definition":(t,e,s,n)=>{pushContainer(n)},"-reference_definition":(t,e,s,n)=>{const i=popContainer(n),r=normalizeLabel(i.data.key),a={tag:"reference",label:r,destination:i.data.value||"",attributes:i.attributes,pos:i.pos};i.data.key&&(c[r]=a)},reference_key:(e,s,n,i)=>{topContainer().data.key=t.substring(s+1,n),topContainer().data.value=""},reference_value:(e,s,n,i)=>{topContainer().data.value=topContainer().data.value+t.substring(s,n+1)},"+emph":(t,e,s,n)=>{pushContainer(n)},"-emph":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"emph",children:i.children,pos:i.pos})},"+strong":(t,e,s,n)=>{pushContainer(n)},"-strong":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"strong",children:i.children,pos:i.pos})},"+span":(t,e,s,n)=>{pushContainer(n)},"-span":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"span",children:i.children,pos:i.pos})},"+mark":(t,e,s,n)=>{pushContainer(n)},"-mark":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"mark",children:i.children,pos:i.pos})},"+superscript":(t,e,s,n)=>{pushContainer(n)},"-superscript":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"superscript",children:i.children,pos:i.pos})},"+subscript":(t,e,s,n)=>{pushContainer(n)},"-subscript":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"subscript",children:i.children,pos:i.pos})},"+delete":(t,e,s,n)=>{pushContainer(n)},"-delete":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"delete",children:i.children,pos:i.pos})},"+insert":(t,e,s,n)=>{pushContainer(n)},"-insert":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"insert",children:i.children,pos:i.pos})},"+double_quoted":(t,e,s,n)=>{pushContainer(n)},"-double_quoted":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"double_quoted",children:i.children,pos:i.pos})},"+single_quoted":(t,e,s,n)=>{pushContainer(n)},"-single_quoted":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"single_quoted",children:i.children,pos:i.pos})},"+attributes":(t,e,s,n)=>{pushContainer(n)},"-attributes":(t,s,n,r)=>{const a=popContainer(r);if(a.attributes&&m.length>0){a.attributes.id&&(d[a.attributes.id]=!0);let t=getTip();if(t===topContainer())return;let n=!1;if("tag"in t&&"str"===t.tag){const e=t.text.match(/[^\s]+$/);if(e&&e.index&&e.index>0){let s;if(t.pos){const n=t.pos.end;t.pos.end={line:n.line,col:n.col-e[0].length,offset:n.offset-e[0].length},s={start:{line:n.line,col:n.col-e[0].length+1,offset:n.offset-e[0].length+1},end:n}}t.text=t.text.substring(0,e.index),addChildToTip({tag:"str",text:e[0],pos:s})}else e||(n=!0)}if(t=getTip(),n)return void b(new i.Warning("Ignoring unattached attribute",e.sourcePositions?getSourceLoc(s):s));t.attributes||(t.attributes={});for(const e in a.attributes)"class"===e&&t.attributes[e]?t.attributes[e]=t.attributes[e]+" "+a.attributes[e]:t.attributes[e]=a.attributes[e]}},"+block_attributes":(t,e,s,n)=>{pushContainer(n)},"-block_attributes":(t,e,s,n)=>{const i=popContainer(n);if(i.attributes&&m.length>0){i.attributes.id&&(d[i.attributes.id]=!0);for(const t in i.attributes)"class"===t&&u[t]?u[t]=u[t]+" "+i.attributes[t]:u[t]=i.attributes[t]}},class:(e,s,n,i)=>{const r=topContainer(),a=t.substring(s,n+1);r.attributes||(r.attributes={}),r.attributes.class?r.attributes.class=r.attributes.class+" "+a:r.attributes.class=a},id:(e,s,n,i)=>{const r=topContainer(),a=t.substring(s,n+1);r.attributes?r.attributes.id=a:r.attributes={id:a}},key:(e,s,n,i)=>{const r=topContainer(),a=t.substring(s,n+1);r.data.key=a,r.attributes||(r.attributes={}),r.attributes[r.data.key]=""},value:(e,s,n,i)=>{const r=topContainer(),a=t.substring(s,n+1).replace(/[ \r\n]+/g," ").replace(/\\([.,\\/#!$%^&*;:{}=\-_`~+[\]()'"?|])/g,"$1");if(r.attributes||(r.attributes={}),!r.data.key)throw new Error("Encountered value without key");r.attributes[r.data.key]=r.attributes[r.data.key]+a},"+linktext":(t,e,s,n)=>{pushContainer(n),topContainer().data.isimage=!1},"-linktext":(t,e,s,n)=>{},"+imagetext":(t,e,s,n)=>{pushContainer(n),topContainer().data.isimage=!0},"-imagetext":(t,e,s,n)=>{},"+destination":(t,e,s,n)=>{r=o.Literal},"-destination":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:i.data.isimage?"image":"link",destination:a.replace(/[\r\n]/g,""),children:i.children,pos:i.pos}),r=o.Normal,a=""},"+reference":(t,e,s,n)=>{r=o.Literal},"-reference":(t,e,s,n)=>{const i=popContainer(n);let c=a;0===c.length&&(c=getStringContent(i)),addChildToTip({tag:i.data.isimage?"image":"link",reference:normalizeLabel(c),children:i.children,pos:i.pos}),r=o.Normal,a=""},"+verbatim":(t,e,s,n)=>{r=o.Verbatim,pushContainer(n)},"-verbatim":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"verbatim",text:trimVerbatim(a),pos:i.pos}),r=o.Normal,a=""},raw_format:(e,s,n,i)=>{const a=t.substring(s,n+1).replace(/^\{?=/,"").replace(/\}$/,""),c=topContainer();if(r===o.Verbatim)c.data.format=a;else{const t=c.children[c.children.length-1];if(!t||!("tag"in t)||"verbatim"!==t.tag)throw new Error("raw_format is not after verbatim or code_block.");t.tag="raw_inline",t.format=a}},"+display_math":(t,e,s,n)=>{r=o.Verbatim,pushContainer(n)},"+inline_math":(t,e,s,n)=>{r=o.Verbatim,pushContainer(n)},"-display_math":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"display_math",text:trimVerbatim(a),pos:i.pos}),r=o.Normal,a=""},"-inline_math":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"inline_math",text:trimVerbatim(a),pos:i.pos}),r=o.Normal,a=""},"+url":(t,e,s,n)=>{r=o.Literal,pushContainer(n)},"-url":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"url",text:a.replace(/[\r\n]/g,""),pos:i.pos}),r=o.Normal,a=""},"+email":(t,e,s,n)=>{r=o.Literal,pushContainer(n)},"-email":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"email",text:a.replace(/[\r\n]/g,""),pos:i.pos}),r=o.Normal,a=""},"+para":(t,e,s,n)=>{pushContainer(n)},"-para":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"para",children:i.children,attributes:i.attributes,pos:i.pos})},"+heading":(t,e,s,n)=>{pushContainer(n),topContainer().data.level=1+s-e},"-heading":(t,e,s,n)=>{const i=popContainer(n);i.attributes||(i.attributes={}),i.autoAttributes||(i.autoAttributes={});const r=getStringContent(i).trim();i.attributes.id||(i.autoAttributes.id=function(t){const e=t.replace(/[\]\[~!@#$%^&*(){}`,.<>\\|=+/?\s]+/g," ").trim().replace(/ +/g,"-");let s=0,n=e;for(;!n||d[n];)s+=1,n=(e||"s")+"-"+s;return n}(r),d[i.autoAttributes.id]=!0);const a=normalizeLabel(r);c[a]||l[a]||(l[a]={tag:"reference",label:a,destination:"#"+(i.attributes.id||i.autoAttributes.id)});let o=topContainer();if(void 0!==o.data.headinglevel){for(;o&&void 0!==o.data.headinglevel&&o.data.headinglevel>=i.data.level;)o=popContainer(n),addChildToTip({tag:"section",children:o.children,attributes:o.attributes,autoAttributes:o.autoAttributes,pos:o.pos}),o=topContainer();pushContainer(n),topContainer().data.headinglevel=i.data.level,i.autoAttributes&&i.autoAttributes.id&&(topContainer().autoAttributes=i.autoAttributes,delete i.autoAttributes),i.attributes&&i.attributes.id&&(topContainer().attributes=i.attributes,delete i.attributes)}addChildToTip({tag:"heading",level:i.data.level,children:i.children,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos})},"+list":(t,e,s,n)=>{pushContainer(n),topContainer().data.styles=t,topContainer().data.blanklines=!1,topContainer().data.tight=!0,p++},"-list":(t,e,s,n)=>{const i=popContainer(n),r=i.data.styles[0];if(!r)throw new Error("No style defined for list");const a=function(t,e){const s=e.replace(/[().]/g,""),n=t.replace(/[().]/g,"");switch(s){case"1":return parseInt(n,10);case"A":return(n.codePointAt(0)||65)-65+1;case"a":return(n.codePointAt(0)||97)-97+1;case"I":case"i":return romanToNumber(n)}}(i.data.firstMarker,r);addChildToTip(":"===r?{tag:"definition_list",children:i.children,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos}:"X"===r?{tag:"task_list",tight:i.data.tight,children:i.children,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos}:"+"===r||"*"===r||"-"===r?{tag:"bullet_list",tight:i.data.tight,style:r,children:i.children,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos}:{tag:"ordered_list",style:r,children:i.children,start:a,tight:i.data.tight,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos}),p--},"+list_item":(e,s,n,i)=>{e.length<topContainer().data.styles.length&&(topContainer().data.styles=e),topContainer().data.firstMarker||(topContainer().data.firstMarker=t.substring(s,n+1)),pushContainer(i),1===e.length&&":"===e[0]&&(topContainer().data.definitionList=!0)},"-list_item":(t,e,s,n)=>{const i=popContainer(n);if(i.data.definitionList)if(i.children[0]&&"para"===i.children[0].tag){const t={tag:"term",children:i.children[0].children};i.children.shift();const e={tag:"definition",children:i.children};addChildToTip({tag:"definition_list_item",children:[t,e],attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos})}else{const t={tag:"term",children:[]},e={tag:"definition",children:i.children};addChildToTip({tag:"definition_list_item",children:[t,e],attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos})}else i.data.checkbox?addChildToTip({tag:"task_list_item",children:i.children,attributes:i.attributes,autoAttributes:i.autoAttributes,checkbox:i.data.checkbox,pos:i.pos}):addChildToTip({tag:"list_item",children:i.children,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos})},checkbox_checked:(t,e,s,n)=>{topContainer().data.checkbox="checked"},checkbox_unchecked:(t,e,s,n)=>{topContainer().data.checkbox="unchecked"},"+block_quote":(t,e,s,n)=>{pushContainer(n)},"-block_quote":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"block_quote",children:i.children,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos})},"+table":(t,e,s,n)=>{pushContainer(n),topContainer().data.aligns=[]},"-table":(t,e,s,n)=>{var i;const r=popContainer(n),a=r.children;let o={tag:"caption",children:[]};"caption"===(null===(i=a[0])||void 0===i?void 0:i.tag)&&(o=a.shift()),addChildToTip({tag:"table",children:[o,...a],attributes:r.attributes,autoAttributes:r.autoAttributes,pos:r.pos})},"+row":(t,e,s,n)=>{pushContainer(n),topContainer().data.aligns=[]},"-row":(t,e,s,n)=>{const i=popContainer(n);if(0===i.children.length){topContainer().data.aligns=i.data.aligns;const t=getTip();if(t&&"tag"in t&&"row"===t.tag){t.head=!0;for(let e=0;e<t.children.length;e++)t.children[e].head=!0,t.children[e].align=i.data.aligns[e]||"default"}}else{i.data.aligns=[];for(let t=0;t<i.children.length;t++)i.children[t].align=topContainer().data.aligns[t]||"default";addChildToTip({tag:"row",children:i.children,head:!1,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos})}},separator_default:(t,e,s,n)=>{topContainer().data.aligns.push("default")},separator_left:(t,e,s,n)=>{topContainer().data.aligns.push("left")},separator_right:(t,e,s,n)=>{topContainer().data.aligns.push("right")},separator_center:(t,e,s,n)=>{topContainer().data.aligns.push("center")},"+cell":(t,e,s,n)=>{pushContainer(n)},"-cell":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"cell",children:i.children,head:!1,align:"default",attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos})},"+caption":(t,e,s,n)=>{pushContainer(n)},"-caption":(t,e,s,n)=>{var i;const r=popContainer(n),a=getTip();if(!a||"tag"in a&&"table"!==a.tag)return;const o={tag:"caption",children:r.children,attributes:r.attributes,autoAttributes:r.autoAttributes,pos:r.pos};"caption"===(null===(i=a.children[0])||void 0===i?void 0:i.tag)&&(a.children[0]=o)},"+footnote":(t,e,s,n)=>{pushContainer(n)},"-footnote":(t,s,n,r)=>{const a=popContainer(r);if(a.data.label){const t=normalizeLabel(a.data.label);h[t]={tag:"footnote",label:t||"",children:a.children,attributes:a.attributes,autoAttributes:a.autoAttributes,pos:a.pos}}else b(new i.Warning("Ignoring footnote without a label.",e.sourcePositions?getSourceLoc(n):n))},note_label:(e,s,n,i)=>{topContainer().data.label=t.substring(s,n+1)},"+code_block":(t,e,s,n)=>{pushContainer(n),r=o.Verbatim},"-code_block":(t,e,s,n)=>{const i=popContainer(n);i.data.format?addChildToTip({tag:"raw_block",format:i.data.format,text:a,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos}):addChildToTip({tag:"code_block",text:a,lang:i.data.lang,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos}),r=o.Normal,a=""},code_language:(e,s,n,i)=>{topContainer().data.lang=t.substring(s,n+1)},"+div":(t,e,s,n)=>{pushContainer(n)},"-div":(t,e,s,n)=>{const i=popContainer(n);addChildToTip({tag:"div",children:i.children,attributes:i.attributes,autoAttributes:i.autoAttributes,pos:i.pos})},thematic_break:(t,e,s,n)=>{const i={tag:"thematic_break",pos:n};addBlockAttributes(i),addChildToTip(i)},left_single_quote:(t,e,s,n)=>{addChildToTip({tag:"smart_punctuation",type:"left_single_quote",text:"'",pos:n})},right_single_quote:(t,e,s,n)=>{addChildToTip({tag:"smart_punctuation",type:"right_single_quote",text:"'",pos:n})},left_double_quote:(t,e,s,n)=>{addChildToTip({tag:"smart_punctuation",type:"left_double_quote",text:'"',pos:n})},right_double_quote:(t,e,s,n)=>{addChildToTip({tag:"smart_punctuation",type:"right_double_quote",text:'"',pos:n})},ellipses:(t,e,s,n)=>{addChildToTip({tag:"smart_punctuation",type:"ellipses",text:"...",pos:n})},en_dash:(t,e,s,n)=>{addChildToTip({tag:"smart_punctuation",type:"en_dash",text:"--",pos:n})},em_dash:(t,e,s,n)=>{addChildToTip({tag:"smart_punctuation",type:"em_dash",text:"---",pos:n})},blankline:(t,e,s,n)=>{let i;"tight"in topContainer().data?i=topContainer():m.length>=2&&"tight"in m[m.length-2].data&&(i=m[m.length-2]),i&&(i.data.blanklines=!0)}},handleEvent=function(t,s){let n,i,r;e.sourcePositions&&(n=getSourceLoc(s.startpos),i=getSourceLoc(s.endpos),r={start:n,end:i});let a=s.annot,o=[];if(s.annot.includes("|")){const t=s.annot.split("|");a=t[0],o=t.slice(1)}if(p>0&&"blankline"!==a){let e;const s=topContainer();s&&(s.data&&"tight"in s.data?e=s:t.length>=2&&"tight"in t[t.length-2].data&&(e=t[t.length-2])),e&&(!/^[+-]list/.test(a)&&e.data.blanklines&&(e.data.tight=!1),/^[-+]list_item$/.test(a)||(e.data.blanklines=!1))}const c=g[a];c&&c(o,s.startpos,s.endpos,r)},m=[{children:[],data:{headinglevel:0},pos:{start:{line:0,col:0,offset:0},end:{line:0,col:0,offset:0}}}];let _,k=0;for(const t of f)handleEvent(m,t),k=t.endpos;e.sourcePositions&&(_=getSourceLoc(k));let A=topContainer();for(;A&&A.data.headinglevel>0;)popContainer(_&&{start:_,end:_}),addChildToTip({tag:"section",children:A.children,attributes:A.attributes,autoAttributes:A.autoAttributes,pos:A.pos}),A=topContainer();const N={tag:"doc",references:c,autoReferences:l,footnotes:h,children:m[0].children};return m[0].autoAttributes&&(N.autoAttributes=m[0].autoAttributes),m[0].attributes&&(N.attributes=m[0].attributes),N};const c={children:!0,tag:!0,pos:!0,attributes:!0,autoAttributes:!0,references:!0,autoReferences:!0,footnotes:!0},stringify=function(t){return JSON.stringify(t).replace(/\\\n/g,"\\n")},renderAstNode=function(t,e,s){if(e.push(" ".repeat(s)),s>128)e.push("(((DEEPLY NESTED CONTENT OMITTED)))\n");else{e.push(t.tag),t.pos&&e.push(` (${t.pos.start.line}:${t.pos.start.col}:${t.pos.start.offset}-${t.pos.end.line}:${t.pos.end.col}:${t.pos.end.offset})`);for(const s in t)if(!c[s]){const n=t[s];null!=n&&e.push(` ${s}=${stringify(n)}`)}if(t.attributes)for(const s in t.attributes)e.push(` ${s}=${stringify(t.attributes[s])}`);if(e.push("\n"),t.children)for(const n of t.children)renderAstNode(n,e,s+2)}};e.renderAST=function(t){const e=[];if(renderAstNode(t,e,0),Object.keys(t.references).length>0){e.push("references\n");for(const s in t.references)e.push(`  [${stringify(s)}] =\n`),renderAstNode(t.references[s],e,4)}if(Object.keys(t.footnotes).length>0){e.push("footnotes\n");for(const s in t.footnotes)e.push(`  [${stringify(s)}] =\n`),renderAstNode(t.footnotes[s],e,4)}return e.join("")}},zPqR:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineParser=void 0;const n=s("kl7G"),i=s("KaJk"),r=s("+aVN"),a=/[\r\n"'()*+.:<=[\\\]^_`${}~-]/g,findSpecial=function(t,e,s){a.lastIndex=e;const n=a.exec(t);return n&&n.index<=s?n.index:null},o=(0,r.pattern)("[^ \t\r\n]"),c=(0,r.pattern)("[ \\t]*\\r?\\n"),l=(0,r.pattern)("['!\"#$%&\\\\'()\\*+,\\-\\.\\/:;<=>?@\\[\\]\\^_`{|}~']"),h=(0,r.pattern)("\\<([^<>\\s]+)\\>"),d=(0,r.pattern)("[_*~^+='\"-]"),u=(0,r.pattern)(":[\\w_+-]+:"),p=(0,r.pattern)("\\.\\."),f=(0,r.pattern)("`*"),b=(0,r.pattern)("`+"),g=(0,r.pattern)("\\$\\$"),m=(0,r.pattern)("\\$"),_=(0,r.pattern)("\\\\"),k=(0,r.pattern)("\\{=[^\\s{}`]+\\}"),A=(0,r.pattern)("\\^([^\\]]+)\\]"),hasBrace=function(t,e){return e>0&&123===t.subject.codePointAt(e-1)||125===t.subject.codePointAt(e+1)},alwaysTrue=function(){return!0},betweenMatched=function(t,e,s,n){return function(i,a,c){const l=i.subject;let h=null!==(0,r.find)(l,o,a+1)&&n(i,a),d=null!==(0,r.find)(l,o,a-1);const u=i.matches[i.matches.length-1],p=u&&"open_marker"===u.annot,f=a+1<=c&&125===l.codePointAt(a+1);let b=a,g=a;p&&(h=!0,d=!1,g=a-1),!p&&f&&(d=!0,h=!1,b=a+1),p&&s.match(/^right/)?s=s.replace(/^right/,"left"):f&&s.match(/^left/)&&(s=s.replace(/^left/,"right"));let m=t;f&&(m="{"+m);const _=i.openers[m];if(d&&_&&_.length>0){const t=_[_.length-1];if(t.endpos!==a-1)return i.clearOpeners(t.startpos,a),i.addMatch(t.startpos,t.endpos,"+"+e,t.matchIndex),i.addMatch(a,b,"-"+e),b+1}if(h){let e=t;return p&&(e="{"+e),i.addOpener(e,g,a,s),a+1}return i.addMatch(a,b,s),b+1}},N={96:function(t,e,s){const n=t.subject,i=(0,r.find)(n,f,e,s);if(null===i)return null;const a=i.endpos;return(0,r.find)(n,g,e-2)&&!(0,r.find)(n,_,e-3)?(t.matches.pop(),t.matches.pop(),t.addMatch(e-2,a,"+display_math"),t.verbatimType="display_math"):(0,r.find)(n,m,e-1)?(t.matches.pop(),t.addMatch(e-1,a,"+inline_math"),t.verbatimType="inline_math"):(t.addMatch(e,a,"+verbatim"),t.verbatimType="verbatim"),t.verbatim=a-e+1,a+1},92:function(t,e,s){const n=t.subject,i=(0,r.find)(n,c,e+1,s);if(null!==i){if(t.matches.length>0){const e=t.matches[t.matches.length-1];if("str"===e.annot){let s=e.endpos;const i=e.startpos;for(;s>=i&&(32===n.codePointAt(s)||9===n.codePointAt(s));)s-=1;s<i?t.matches.pop():e.endpos=s}}return t.addMatch(e,e,"escape"),t.addMatch(e+1,i.endpos,"hard_break"),i.endpos+1}{const i=(0,r.find)(n,l,e+1,s);return null!==i?(t.addMatch(e,e,"escape"),t.addMatch(i.startpos,i.endpos,"str"),i.endpos+1):e+1<=s&&32===n.codePointAt(e+1)?(t.addMatch(e,e,"escape"),t.addMatch(e+1,e+1,"non_breaking_space"),e+2):(t.addMatch(e,e,"str"),e+1)}},60:function(t,e,s){const n=t.subject,i=(0,r.find)(n,h,e,s);if(null===i)return null;const a=i.endpos,o=i.startpos,c=i.captures[0];return c.match(/[^:]@/)?(t.addMatch(o,o,"+email"),t.addMatch(o+1,a-1,"str"),t.addMatch(a,a,"-email"),a+1):c.match(/[a-zA-Z]:/)?(t.addMatch(o,o,"+url"),t.addMatch(o+1,a-1,"str"),t.addMatch(a,a,"-url"),a+1):null},126:betweenMatched("~","subscript","str",alwaysTrue),94:betweenMatched("^","superscript","str",alwaysTrue),95:betweenMatched("_","emph","str",alwaysTrue),42:betweenMatched("*","strong","str",alwaysTrue),43:betweenMatched("+","insert","str",hasBrace),61:betweenMatched("=","mark","str",hasBrace),39:betweenMatched("'","single_quoted","right_single_quote",(function(t,e){if(0===e)return!0;{const s=t.subject.codePointAt(e-1);return 32===s||9===s||13===s||10===s||34===s||39===s||45===s||40===s||91===s}})),34:betweenMatched('"',"double_quoted","left_double_quote",alwaysTrue),123:function(t,e,s){return(0,r.find)(t.subject,d,e+1,s)?(t.addMatch(e,e,"open_marker"),e+1):t.allowAttributes?(t.attributeParser=new n.AttributeParser(t.subject),t.attributeStart=e,t.attributeSlices=[],e):(t.addMatch(e,e,"str"),e+1)},58:function(t,e,s){const n=(0,r.find)(t.subject,u,e,s);return n?(t.addMatch(n.startpos,n.endpos,"symb"),n.endpos+1):(t.addMatch(e,e,"str"),e+1)},46:function(t,e,s){return(0,r.find)(t.subject,p,e+1,s)?(t.addMatch(e,e+2,"ellipses"),e+3):null},91:function(t,e,s){const n=(0,r.find)(t.subject,A,e+1,s);return n?(t.addMatch(e,n.endpos,"footnote_reference"),n.endpos+1):(t.addOpener("[",e,e,"str"),e+1)},93:function(t,e,s){const n=t.openers["["],i=t.subject;if(n&&n.length>0){const r=n[n.length-1];if("reference_link"===r.annot){return t.strMatches((r.subendpos||r.endpos)+1,e-1),33===i.codePointAt(r.startpos-1)&&92!==i.codePointAt(r.startpos-2)?(t.addMatch(r.startpos-1,r.startpos-1,"image_marker",r.matchIndex-1),t.addMatch(r.startpos,r.endpos,"+imagetext",r.matchIndex),t.addMatch(r.substartpos||r.startpos,r.substartpos||r.startpos,"-imagetext",r.subMatchIndex)):(t.addMatch(r.startpos,r.endpos,"+linktext",r.matchIndex),t.addMatch(r.substartpos||r.startpos,r.substartpos||r.startpos,"-linktext",r.subMatchIndex)),t.addMatch(r.subendpos||r.endpos,r.subendpos||r.endpos,"+reference",r.subMatchIndex+1),t.addMatch(e,e,"-reference"),t.clearOpeners(r.startpos,e),e+1}if(e+1<=s&&91===i.codePointAt(e+1))return r.annot="reference_link",t.addMatch(e,e,"str"),r.subMatchIndex=t.matches.length-1,t.addMatch(e+1,e+1,"str"),r.substartpos=e,r.subendpos=e+1,t.clearOpeners(r.startpos+1,e-1),e+2;if(e+1<=s&&40===i.codePointAt(e+1))return t.openers["("]=[],r.annot="explicit_link",t.addMatch(e,e,"str"),r.subMatchIndex=t.matches.length-1,t.addMatch(e+1,e+1,"str"),r.substartpos=e,r.subendpos=e+1,t.destination=!0,t.clearOpeners(r.startpos+1,e-1),e+2;if(e+1<=s&&123===i.codePointAt(e+1))return t.addMatch(r.startpos,r.endpos,"+span",r.matchIndex),t.addMatch(e,e,"-span"),t.clearOpeners(r.startpos,e),e+1}return null},40:function(t,e,s){return t.destination?(t.addOpener("(",e,e,"str"),e+1):null},41:function(t,e,s){if(!t.destination)return null;const n=t.openers["("];if(n&&n.length>0)return n.pop(),t.addMatch(e,e,"str"),e+1;{const s=t.subject,n=t.openers["["],i=n[n.length-1];if(n&&n.length>0&&"explicit_link"===i.annot){return t.strMatches((i.subendpos||i.endpos)+1,e-1),33===s.codePointAt(i.startpos-1)&&92!==s.codePointAt(i.startpos-2)?(t.addMatch(i.startpos-1,i.startpos-1,"image_marker",i.matchIndex-1),t.addMatch(i.startpos,i.endpos,"+imagetext",i.matchIndex),t.addMatch(i.substartpos||i.startpos,i.substartpos||i.startpos,"-imagetext",i.subMatchIndex)):(t.addMatch(i.startpos,i.endpos,"+linktext",i.matchIndex),t.addMatch(i.substartpos||i.startpos,i.substartpos||i.startpos,"-linktext",i.subMatchIndex)),t.addMatch(i.subendpos||i.endpos,i.subendpos||i.endpos,"+destination",i.subMatchIndex+1),t.addMatch(e,e,"-destination"),t.destination=!1,t.clearOpeners(i.startpos,e),e+1}}return null},45:function(t,e,s){const n=t.subject;if(123===n.codePointAt(e-1)||125===n.codePointAt(e+1)){const n=betweenMatched("-","delete","str",hasBrace)(t,e,s);if(n)return n}let i=e,r=0;for(;i<=s&&45===n.codePointAt(i);)i++,r++;if(125===n.codePointAt(i)&&r--,0===r)return t.addMatch(e,e+1,"str"),e+2;const a=r%3==0,o=r%2==0;for(;r>0;)a?(t.addMatch(e,e+2,"em_dash"),e+=3,r-=3):o?(t.addMatch(e,e+1,"en_dash"),e+=2,r-=2):r>=3&&(r%2!=0||r>4)?(t.addMatch(e,e+2,"em_dash"),e+=3,r-=3):r>=2?(t.addMatch(e,e+1,"en_dash"),e+=2,r-=2):(t.addMatch(e,e,"str"),e+=1,r-=1);return e}};e.InlineParser=class InlineParser{constructor(t,e={}){this.options=e,this.warn=e.warn||(()=>{}),this.subject=t,this.matches=[],this.openers={},this.verbatim=0,this.verbatimType="",this.destination=!1,this.firstpos=-1,this.lastpos=0,this.allowAttributes=!0,this.attributeParser=null,this.attributeStart=null,this.attributeSlices=null,this.matchers=N}addMatch(t,e,s,n){const i={startpos:t,endpos:e,annot:s};void 0!==n?this.matches.splice(n,1,i):this.matches.push(i)}inVerbatim(){return this.verbatim>0}singleChar(t){return this.addMatch(t,t,"str"),t+1}reparseAttributes(){const t=this.attributeSlices;if(null!==t){if(this.allowAttributes=!1,this.attributeParser=null,this.attributeStart=null,null!==t)for(const e of t)this.feed(e.startpos,e.endpos);this.allowAttributes=!0,this.attributeSlices=null}}getMatches(){const t=this.subject;this.attributeParser&&this.reparseAttributes();let e=this.matches.length-1;if(this.matches[e]&&"soft_break"===this.matches[e].annot){this.matches.pop();const e=this.matches[this.matches.length-1];if(e&&"str"===e.annot&&32===t.codePointAt(e.endpos)){for(;e.endpos>=e.startpos&&32===t.codePointAt(e.endpos);)e.endpos=e.endpos-1;e.endpos<e.startpos&&this.matches.pop()}}if(this.matches.length>0&&this.verbatim>0){const t=this.matches[this.matches.length-1];this.warn(new i.Warning("Unclosed verbatim",t.endpos)),this.matches.push({startpos:t.endpos,endpos:t.endpos,annot:"-"+this.verbatimType})}return this.matches}addOpener(t,e,s,n){this.openers[t]||(this.openers[t]=[]),this.openers[t].push({matchIndex:this.matches.length,startpos:e,endpos:s,annot:null,subMatchIndex:this.matches.length,substartpos:null,subendpos:null}),this.addMatch(e,s,n)}clearOpeners(t,e){for(const s in this.openers){const n=this.openers[s];let i=n.length-1;for(;n[i];){const s=n[i];if(s.startpos>=t&&s.endpos<=e)n.splice(i,1);else{if(!(s.substartpos&&s.substartpos>=t&&s.subendpos&&s.subendpos<=e))break;n[i].substartpos=null,n[i].subendpos=null,n[i].annot=null}i--}}}strMatches(t,e){let s=this.matches.length-1;for(;s>0&&this.matches[s].startpos>=t;)s--;for(this.matches[s].startpos<t&&s++;this.matches[s]&&this.matches[s].endpos<=e;){const t=this.matches[s];"escape"!==t.annot&&"str"!==t.annot&&(t.annot="str"),s++}}feed(t,e){const s=this.subject;(-1===this.firstpos||t<this.firstpos)&&(this.firstpos=t),(0===this.lastpos||e>this.lastpos)&&(this.lastpos=e);let n=t;for(;n<=e;)if(null!==this.attributeParser){const t=n,i=findSpecial(s,n,e);let r;r=null===i?e:i;const a=this.attributeParser.feed(t,r),o=a.position;if("done"===a.status){const t=this.attributeStart;null!==t&&this.addMatch(t,t,"+attributes");const e=this.attributeParser.matches;for(const t of e)this.addMatch(t.startpos,t.endpos,t.annot);this.addMatch(o,o,"-attributes"),this.attributeParser=null,this.attributeStart=null,this.attributeSlices=null,n=o+1}else"fail"===a.status?(this.reparseAttributes(),n=t):"continue"===a.status&&(null===this.attributeSlices&&(this.attributeSlices=[]),this.attributeSlices.push({startpos:t,endpos:o}),n=o+1)}else{const t=findSpecial(s,n,e);let i;if(i=null===t?e+1:t,i>n&&(this.addMatch(n,i-1,"str"),n=i,n>e))break;const a=s.codePointAt(n);if(void 0===a)throw new Error("Code point at "+n+" is undefined.");if(13===a||10===a)13===a&&10===s.codePointAt(n+1)&&n+1<=e?(this.addMatch(n,n+1,"soft_break"),n+=2):(this.addMatch(n,n,"soft_break"),n+=1);else if(this.verbatim>0)if(96===a){const t=(0,r.find)(s,b,n,e);if(t){const i=t.endpos;if(t.endpos-n+1===this.verbatim){const t=(0,r.find)(s,k,i+1,e);t&&"verbatim"===this.verbatimType?(this.addMatch(n,i,"-"+this.verbatimType),this.addMatch(t.startpos,t.endpos,"raw_format"),n=t.endpos+1):(this.addMatch(n,i,"-"+this.verbatimType),n=i+1),this.verbatim=0,this.verbatimType="verbatim"}else this.addMatch(n,i,"str"),n=i+1}else this.addMatch(n,e,"str"),n=e+1}else this.addMatch(n,n,"str"),n+=1;else{const t=this.matchers[a];if(t){const s=t(this,n,e);n=null===s?this.singleChar(n):s}else n=this.singleChar(n)}}}}}}]);